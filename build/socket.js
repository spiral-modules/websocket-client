/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./lib/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/CallbackRegistry.ts":
/*!*********************************!*\
  !*** ./lib/CallbackRegistry.ts ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CallbackRegistry; });\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events */ \"./lib/events.ts\");\n\r\nconst allTypes = [\r\n    _events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].MESSAGE,\r\n    _events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].ERROR,\r\n    _events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTED,\r\n    _events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].DISCONNECTED,\r\n    _events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTING,\r\n];\r\nclass CallbackRegistry {\r\n    constructor() {\r\n        this.callbacks = {\r\n            [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].MESSAGE]: [],\r\n            [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].ERROR]: [],\r\n            [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTED]: [],\r\n            [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].DISCONNECTED]: [],\r\n            [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTING]: [],\r\n        };\r\n    }\r\n    get(name) {\r\n        return this.callbacks[name];\r\n    }\r\n    add(name, callback, channel) {\r\n        this.callbacks[name].push({\r\n            fn: callback,\r\n            channel: channel || null,\r\n        });\r\n    }\r\n    remove(name, callback, channel) {\r\n        if (!name && !callback && !channel) {\r\n            this.callbacks = {\r\n                [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].MESSAGE]: [],\r\n                [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].ERROR]: [],\r\n                [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTED]: [],\r\n                [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].DISCONNECTED]: [],\r\n                [_events__WEBPACK_IMPORTED_MODULE_0__[\"EventType\"].CONNECTING]: [],\r\n            };\r\n            return;\r\n        }\r\n        const names = name ? [name] : allTypes;\r\n        if (callback || channel) {\r\n            this.removeCallback(names, callback, channel);\r\n        }\r\n        else {\r\n            this.removeAllCallbacks(names);\r\n        }\r\n    }\r\n    removeCallback(names, callback, channel) {\r\n        names.forEach((name) => {\r\n            const callbacks = this.callbacks[name] || [];\r\n            this.callbacks[name] = callbacks.filter((existedCallback) => {\r\n                const isEqualCallback = callback && callback === existedCallback.fn;\r\n                const isEqualChannel = channel && channel === existedCallback.channel;\r\n                return !isEqualCallback && !isEqualChannel;\r\n            });\r\n        });\r\n    }\r\n    removeAllCallbacks(names) {\r\n        names.forEach((name) => {\r\n            this.callbacks[name] = [];\r\n        });\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvQ2FsbGJhY2tSZWdpc3RyeS50cz80YWUxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFxQztBQUVyQyxNQUFNLFFBQVEsR0FBRztJQUNmLGlEQUFTLENBQUMsT0FBTztJQUNqQixpREFBUyxDQUFDLEtBQUs7SUFDZixpREFBUyxDQUFDLFNBQVM7SUFDbkIsaURBQVMsQ0FBQyxZQUFZO0lBQ3RCLGlEQUFTLENBQUMsVUFBVTtDQUNyQixDQUFDO0FBRWEsTUFBTSxnQkFBZ0I7SUFBckM7UUFDSSxjQUFTLEdBQW1CO1lBQzFCLENBQUMsaURBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLENBQUMsaURBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFO1lBQ3JCLENBQUMsaURBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFO1lBQ3pCLENBQUMsaURBQVMsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFO1lBQzVCLENBQUMsaURBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFO1NBQzNCLENBQUM7SUFvRE4sQ0FBQztJQWxERyxHQUFHLENBQUMsSUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELEdBQUcsQ0FBQyxJQUFlLEVBQUUsUUFBa0IsRUFBRSxPQUFnQjtRQUN2RCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztZQUN4QixFQUFFLEVBQUUsUUFBUTtZQUNaLE9BQU8sRUFBRSxPQUFPLElBQUksSUFBSTtTQUN6QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQWUsRUFBRSxRQUFtQixFQUFFLE9BQWdCO1FBQzNELElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRztnQkFDZixDQUFDLGlEQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRTtnQkFDdkIsQ0FBQyxpREFBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JCLENBQUMsaURBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFO2dCQUN6QixDQUFDLGlEQUFTLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRTtnQkFDNUIsQ0FBQyxpREFBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUU7YUFDM0IsQ0FBQztZQUNGLE9BQU87U0FDUjtRQUVELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO1FBRXZDLElBQUksUUFBUSxJQUFJLE9BQU8sRUFBRTtZQUN2QixJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDL0M7YUFBTTtZQUNMLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNoQztJQUNILENBQUM7SUFFTyxjQUFjLENBQUMsS0FBa0IsRUFBRSxRQUFtQixFQUFFLE9BQWdCO1FBQzlFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNyQixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUM3QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQ3JDLENBQUMsZUFBMEIsRUFBRSxFQUFFO2dCQUM3QixNQUFNLGVBQWUsR0FBRyxRQUFRLElBQUksUUFBUSxLQUFLLGVBQWUsQ0FBQyxFQUFFLENBQUM7Z0JBQ3BFLE1BQU0sY0FBYyxHQUFHLE9BQU8sSUFBSSxPQUFPLEtBQUssZUFBZSxDQUFDLE9BQU8sQ0FBQztnQkFDdEUsT0FBTyxDQUFDLGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUM3QyxDQUFDLENBQ0YsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLGtCQUFrQixDQUFDLEtBQWtCO1FBQzNDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDSiIsImZpbGUiOiIuL2xpYi9DYWxsYmFja1JlZ2lzdHJ5LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNhbGxiYWNrLCBJQ2FsbGJhY2tUYWJsZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tICcuL2V2ZW50cyc7XHJcblxyXG5jb25zdCBhbGxUeXBlcyA9IFtcclxuICBFdmVudFR5cGUuTUVTU0FHRSxcclxuICBFdmVudFR5cGUuRVJST1IsXHJcbiAgRXZlbnRUeXBlLkNPTk5FQ1RFRCxcclxuICBFdmVudFR5cGUuRElTQ09OTkVDVEVELFxyXG4gIEV2ZW50VHlwZS5DT05ORUNUSU5HLFxyXG5dO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsbGJhY2tSZWdpc3RyeSB7XHJcbiAgICBjYWxsYmFja3M6IElDYWxsYmFja1RhYmxlID0ge1xyXG4gICAgICBbRXZlbnRUeXBlLk1FU1NBR0VdOiBbXSxcclxuICAgICAgW0V2ZW50VHlwZS5FUlJPUl06IFtdLFxyXG4gICAgICBbRXZlbnRUeXBlLkNPTk5FQ1RFRF06IFtdLFxyXG4gICAgICBbRXZlbnRUeXBlLkRJU0NPTk5FQ1RFRF06IFtdLFxyXG4gICAgICBbRXZlbnRUeXBlLkNPTk5FQ1RJTkddOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgZ2V0KG5hbWU6IEV2ZW50VHlwZSk6IElDYWxsYmFja1tdIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChuYW1lOiBFdmVudFR5cGUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgY2hhbm5lbD86IHN0cmluZykge1xyXG4gICAgICB0aGlzLmNhbGxiYWNrc1tuYW1lXS5wdXNoKHtcclxuICAgICAgICBmbjogY2FsbGJhY2ssXHJcbiAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBudWxsLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUobmFtZTogRXZlbnRUeXBlLCBjYWxsYmFjaz86IEZ1bmN0aW9uLCBjaGFubmVsPzogc3RyaW5nKSB7XHJcbiAgICAgIGlmICghbmFtZSAmJiAhY2FsbGJhY2sgJiYgIWNoYW5uZWwpIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHtcclxuICAgICAgICAgIFtFdmVudFR5cGUuTUVTU0FHRV06IFtdLFxyXG4gICAgICAgICAgW0V2ZW50VHlwZS5FUlJPUl06IFtdLFxyXG4gICAgICAgICAgW0V2ZW50VHlwZS5DT05ORUNURURdOiBbXSxcclxuICAgICAgICAgIFtFdmVudFR5cGUuRElTQ09OTkVDVEVEXTogW10sXHJcbiAgICAgICAgICBbRXZlbnRUeXBlLkNPTk5FQ1RJTkddOiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmFtZXMgPSBuYW1lID8gW25hbWVdIDogYWxsVHlwZXM7XHJcblxyXG4gICAgICBpZiAoY2FsbGJhY2sgfHwgY2hhbm5lbCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQ2FsbGJhY2sobmFtZXMsIGNhbGxiYWNrLCBjaGFubmVsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUFsbENhbGxiYWNrcyhuYW1lcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUNhbGxiYWNrKG5hbWVzOiBFdmVudFR5cGVbXSwgY2FsbGJhY2s/OiBGdW5jdGlvbiwgY2hhbm5lbD86IHN0cmluZykge1xyXG4gICAgICBuYW1lcy5mb3JFYWNoKChuYW1lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5jYWxsYmFja3NbbmFtZV0gfHwgW107XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbbmFtZV0gPSBjYWxsYmFja3MuZmlsdGVyKFxyXG4gICAgICAgICAgKGV4aXN0ZWRDYWxsYmFjazogSUNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRXF1YWxDYWxsYmFjayA9IGNhbGxiYWNrICYmIGNhbGxiYWNrID09PSBleGlzdGVkQ2FsbGJhY2suZm47XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRXF1YWxDaGFubmVsID0gY2hhbm5lbCAmJiBjaGFubmVsID09PSBleGlzdGVkQ2FsbGJhY2suY2hhbm5lbDtcclxuICAgICAgICAgICAgcmV0dXJuICFpc0VxdWFsQ2FsbGJhY2sgJiYgIWlzRXF1YWxDaGFubmVsO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUFsbENhbGxiYWNrcyhuYW1lczogRXZlbnRUeXBlW10pIHtcclxuICAgICAgbmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW25hbWVdID0gW107XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/CallbackRegistry.ts\n");

/***/ }),

/***/ "./lib/Channel.ts":
/*!************************!*\
  !*** ./lib/Channel.ts ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Channel; });\n/* harmony import */ var _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventsDispatcher */ \"./lib/EventsDispatcher.ts\");\n\r\nclass Channel extends _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(name, socket) {\r\n        super();\r\n        this.name = name;\r\n        this.socket = socket;\r\n        this.subscribed = false;\r\n        this.subscriptionCancelled = false;\r\n    }\r\n    trigger(event, data) {\r\n        if (!this.subscribed) {\r\n            console.warn('Client event triggered before channel \\'subscription_succeeded\\' event');\r\n        }\r\n        return this.socket.sendEvent(event, data, this.name);\r\n    }\r\n    disconnect() {\r\n        this.subscribed = false;\r\n    }\r\n    join() {\r\n        if (this.subscribed)\r\n            return;\r\n        this.subscriptionCancelled = false;\r\n        this.subscribed = true;\r\n        this.socket.joinChannel(this.name);\r\n    }\r\n    subscribe(eventName, data) {\r\n        this.socket.subscribe(eventName, data, this.name);\r\n    }\r\n    unsubscribe(eventName, data) {\r\n        this.socket.unsubscribe(eventName, data, this.name);\r\n    }\r\n    leaveChannel() {\r\n        this.subscribed = false;\r\n        this.socket.leaveChannel(this.name);\r\n    }\r\n    cancelSubscription() {\r\n        this.subscriptionCancelled = true;\r\n    }\r\n    reinstateSubscription() {\r\n        this.subscriptionCancelled = false;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvQ2hhbm5lbC50cz80ZjRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFrRDtBQUluQyxNQUFNLE9BQVEsU0FBUSx5REFBZ0I7SUFTbkQsWUFBWSxJQUFhLEVBQUUsTUFBZ0I7UUFDekMsS0FBSyxFQUFFLENBQUM7UUFFUixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMscUJBQXFCLEdBQUcsS0FBSyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxPQUFPLENBQUMsS0FBYyxFQUFFLElBQVU7UUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDcEIsT0FBTyxDQUFDLElBQUksQ0FBQyx3RUFBd0UsQ0FBQyxDQUFDO1NBQ3hGO1FBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsVUFBVTtRQUNSLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJO1FBQ0YsSUFBSSxJQUFJLENBQUMsVUFBVTtZQUFFLE9BQU87UUFDNUIsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztRQUNuQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELFNBQVMsQ0FBQyxTQUFvQixFQUFFLElBQVM7UUFDdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVELFdBQVcsQ0FBQyxTQUFvQixFQUFFLElBQVM7UUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELFlBQVk7UUFDVixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVELGtCQUFrQjtRQUNoQixJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDO0lBQ3BDLENBQUM7SUFFRCxxQkFBcUI7UUFDbkIsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztJQUNyQyxDQUFDO0NBQ0YiLCJmaWxlIjoiLi9saWIvQ2hhbm5lbC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudHNEaXNwYXRjaGVyIGZyb20gJy4vRXZlbnRzRGlzcGF0Y2hlcic7XHJcbmltcG9ydCB7IFNGU29ja2V0IH0gZnJvbSAnLi9TRlNvY2tldCc7XHJcbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gJy4vZXZlbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwgZXh0ZW5kcyBFdmVudHNEaXNwYXRjaGVyIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gIHNvY2tldDogU0ZTb2NrZXQ7XHJcblxyXG4gIHN1YnNjcmliZWQ6IGJvb2xlYW47XHJcblxyXG4gIHN1YnNjcmlwdGlvbkNhbmNlbGxlZDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZSA6IHN0cmluZywgc29ja2V0OiBTRlNvY2tldCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7XHJcbiAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9uQ2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB0cmlnZ2VyKGV2ZW50IDogc3RyaW5nLCBkYXRhIDogYW55KSB7IC8vIFRPRE9cclxuICAgIGlmICghdGhpcy5zdWJzY3JpYmVkKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQ2xpZW50IGV2ZW50IHRyaWdnZXJlZCBiZWZvcmUgY2hhbm5lbCBcXCdzdWJzY3JpcHRpb25fc3VjY2VlZGVkXFwnIGV2ZW50Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc29ja2V0LnNlbmRFdmVudChldmVudCwgZGF0YSwgdGhpcy5uYW1lKTtcclxuICB9XHJcblxyXG4gIGRpc2Nvbm5lY3QoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGpvaW4oKSB7XHJcbiAgICBpZiAodGhpcy5zdWJzY3JpYmVkKSByZXR1cm47XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbkNhbmNlbGxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVkID0gdHJ1ZTtcclxuICAgIHRoaXMuc29ja2V0LmpvaW5DaGFubmVsKHRoaXMubmFtZSk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoZXZlbnROYW1lOiBFdmVudFR5cGUsIGRhdGE6IGFueSkgeyAvLyBUT0RPXHJcbiAgICB0aGlzLnNvY2tldC5zdWJzY3JpYmUoZXZlbnROYW1lLCBkYXRhLCB0aGlzLm5hbWUpO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoZXZlbnROYW1lOiBFdmVudFR5cGUsIGRhdGE6IGFueSkgeyAvLyBUT0RPXHJcbiAgICB0aGlzLnNvY2tldC51bnN1YnNjcmliZShldmVudE5hbWUsIGRhdGEsIHRoaXMubmFtZSk7XHJcbiAgfVxyXG5cclxuICBsZWF2ZUNoYW5uZWwoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc29ja2V0LmxlYXZlQ2hhbm5lbCh0aGlzLm5hbWUpO1xyXG4gIH1cclxuXHJcbiAgY2FuY2VsU3Vic2NyaXB0aW9uKCkge1xyXG4gICAgdGhpcy5zdWJzY3JpcHRpb25DYW5jZWxsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcmVpbnN0YXRlU3Vic2NyaXB0aW9uKCkge1xyXG4gICAgdGhpcy5zdWJzY3JpcHRpb25DYW5jZWxsZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Channel.ts\n");

/***/ }),

/***/ "./lib/EventsDispatcher.ts":
/*!*********************************!*\
  !*** ./lib/EventsDispatcher.ts ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EventsDispatcher; });\n/* harmony import */ var _CallbackRegistry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CallbackRegistry */ \"./lib/CallbackRegistry.ts\");\n\r\nclass EventsDispatcher {\r\n    constructor() {\r\n        this.callbacks = new _CallbackRegistry__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\n    }\r\n    bind(eventName, callback, channel) {\r\n        this.callbacks.add(eventName, callback, channel);\r\n        return this;\r\n    }\r\n    unbind(eventName, callback, channel) {\r\n        this.callbacks.remove(eventName, callback, channel);\r\n        return this;\r\n    }\r\n    emit(eventName, event) {\r\n        const callbacks = this.callbacks.get(eventName);\r\n        const channelEvent = event && event.context\r\n            ? event.context.channel\r\n            : null;\r\n        const hasCallbacks = callbacks && callbacks.length > 0;\r\n        if (hasCallbacks) {\r\n            callbacks.forEach((callback) => {\r\n                const isChannelCallback = callback.channel === channelEvent;\r\n                const isGlobalCallback = !callback.channel || !channelEvent;\r\n                if (isGlobalCallback || isChannelCallback) {\r\n                    callback.fn(event);\r\n                }\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvRXZlbnRzRGlzcGF0Y2hlci50cz83MTVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFrRDtBQUtuQyxNQUFNLGdCQUFnQjtJQUduQztRQUNFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSx5REFBZ0IsRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFRCxJQUFJLENBQUMsU0FBcUIsRUFBRSxRQUFtQixFQUFFLE9BQWdCO1FBQy9ELElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDakQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsTUFBTSxDQUFDLFNBQXFCLEVBQUUsUUFBbUIsRUFBRSxPQUFnQjtRQUNqRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3BELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELElBQUksQ0FBQyxTQUFxQixFQUFFLEtBQXNCO1FBQ2hELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRWhELE1BQU0sWUFBWSxHQUE4QixLQUFLLElBQUksS0FBSyxDQUFDLE9BQU87WUFDcEUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTztZQUN2QixDQUFDLENBQUMsSUFBSSxDQUFDO1FBRVQsTUFBTSxZQUFZLEdBQUcsU0FBUyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRXZELElBQUksWUFBWSxFQUFFO1lBQ2hCLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtnQkFDN0IsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsT0FBTyxLQUFLLFlBQVksQ0FBQztnQkFDNUQsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7Z0JBRTVELElBQUksZ0JBQWdCLElBQUksaUJBQWlCLEVBQUU7b0JBQ3pDLFFBQVEsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3BCO1lBQ0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUNGIiwiZmlsZSI6Ii4vbGliL0V2ZW50c0Rpc3BhdGNoZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FsbGJhY2tSZWdpc3RyeSBmcm9tICcuL0NhbGxiYWNrUmVnaXN0cnknO1xyXG5pbXBvcnQgeyBJU0ZTb2NrZXRFdmVudCB9IGZyb20gJy4vU0ZTb2NrZXQnO1xyXG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tICcuL2V2ZW50cyc7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRzRGlzcGF0Y2hlciB7XHJcbiAgY2FsbGJhY2tzOiBDYWxsYmFja1JlZ2lzdHJ5O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IENhbGxiYWNrUmVnaXN0cnkoKTtcclxuICB9XHJcblxyXG4gIGJpbmQoZXZlbnROYW1lIDogRXZlbnRUeXBlLCBjYWxsYmFjayA6IEZ1bmN0aW9uLCBjaGFubmVsPzogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmNhbGxiYWNrcy5hZGQoZXZlbnROYW1lLCBjYWxsYmFjaywgY2hhbm5lbCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHVuYmluZChldmVudE5hbWUgOiBFdmVudFR5cGUsIGNhbGxiYWNrIDogRnVuY3Rpb24sIGNoYW5uZWw/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuY2FsbGJhY2tzLnJlbW92ZShldmVudE5hbWUsIGNhbGxiYWNrLCBjaGFubmVsKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgZW1pdChldmVudE5hbWUgOiBFdmVudFR5cGUsIGV2ZW50PzogSVNGU29ja2V0RXZlbnQpIDogRXZlbnRzRGlzcGF0Y2hlciB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmNhbGxiYWNrcy5nZXQoZXZlbnROYW1lKTtcclxuXHJcbiAgICBjb25zdCBjaGFubmVsRXZlbnQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgPSBldmVudCAmJiBldmVudC5jb250ZXh0XHJcbiAgICAgID8gZXZlbnQuY29udGV4dC5jaGFubmVsXHJcbiAgICAgIDogbnVsbDtcclxuXHJcbiAgICBjb25zdCBoYXNDYWxsYmFja3MgPSBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLmxlbmd0aCA+IDA7XHJcblxyXG4gICAgaWYgKGhhc0NhbGxiYWNrcykge1xyXG4gICAgICBjYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcclxuICAgICAgICBjb25zdCBpc0NoYW5uZWxDYWxsYmFjayA9IGNhbGxiYWNrLmNoYW5uZWwgPT09IGNoYW5uZWxFdmVudDtcclxuICAgICAgICBjb25zdCBpc0dsb2JhbENhbGxiYWNrID0gIWNhbGxiYWNrLmNoYW5uZWwgfHwgIWNoYW5uZWxFdmVudDtcclxuXHJcbiAgICAgICAgaWYgKGlzR2xvYmFsQ2FsbGJhY2sgfHwgaXNDaGFubmVsQ2FsbGJhY2spIHtcclxuICAgICAgICAgIGNhbGxiYWNrLmZuKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/EventsDispatcher.ts\n");

/***/ }),

/***/ "./lib/SFSocket.ts":
/*!*************************!*\
  !*** ./lib/SFSocket.ts ***!
  \*************************/
/*! exports provided: SFSocket */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SFSocket\", function() { return SFSocket; });\n/* harmony import */ var _Channel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Channel */ \"./lib/Channel.ts\");\n/* harmony import */ var _EventsDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventsDispatcher */ \"./lib/EventsDispatcher.ts\");\n/* harmony import */ var _connection_ConnectionManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection/ConnectionManager */ \"./lib/connection/ConnectionManager.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ \"./lib/constants.ts\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events */ \"./lib/events.ts\");\n\r\n\r\n\r\n\r\n\r\nconst CONNECTION_EVENTS = {\r\n    JOIN: 'join',\r\n    LEAVE: 'leave',\r\n};\r\nclass SFSocket {\r\n    constructor(options) {\r\n        if (!options || typeof options !== 'object') {\r\n            throw new Error('sfSocket options should be an object');\r\n        }\r\n        const constructorOptions = options || {};\r\n        this.config = {\r\n            ..._constants__WEBPACK_IMPORTED_MODULE_3__[\"defaultConfig\"],\r\n            ...constructorOptions,\r\n        };\r\n        this.channels = {};\r\n        this.eventsDispatcher = new _EventsDispatcher__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n        this.hasStorage = Boolean(this.config.useStorage && window && window.localStorage);\r\n        this.connection = new _connection_ConnectionManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.config);\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].CONNECTED, () => {\r\n            Object.keys(this.channels).forEach((channelName) => {\r\n                this.subscribeChannel(channelName);\r\n            });\r\n        });\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].MESSAGE, (event) => {\r\n            this.eventsDispatcher.emit(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].MESSAGE, event);\r\n        });\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].CONNECTING, () => {\r\n            this.channelsDisconnect();\r\n        });\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].DISCONNECTED, () => {\r\n            this.channelsDisconnect();\r\n        });\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_4__[\"EventType\"].ERROR, (err) => {\r\n            console.error(err);\r\n        });\r\n        SFSocket.instances.push(this);\r\n        if (SFSocket.isReady) {\r\n            this.connect();\r\n        }\r\n        if (this.hasStorage) {\r\n            const activeChannels = this.getStorage();\r\n            if (activeChannels) {\r\n                activeChannels.forEach((channelName) => {\r\n                    this.subscribeChannel(channelName);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    static ready() {\r\n        SFSocket.isReady = true;\r\n        SFSocket.instances.forEach((instance) => {\r\n            instance.connect();\r\n        });\r\n    }\r\n    connect() {\r\n        this.connection.connect();\r\n    }\r\n    disconnect() {\r\n        this.connection.disconnect();\r\n    }\r\n    sendEvent(eventName, data, channel) {\r\n        return this.connection.sendEvent(eventName, data, channel);\r\n    }\r\n    join(data) {\r\n        return this.sendEvent(CONNECTION_EVENTS.JOIN, data);\r\n    }\r\n    leave(data) {\r\n        return this.sendEvent(CONNECTION_EVENTS.LEAVE, data);\r\n    }\r\n    listen(channelsNames) {\r\n        channelsNames.forEach((channelsName) => {\r\n            if (this.connection.state === 'connected') {\r\n                this.joinChannel(channelsName);\r\n            }\r\n            else {\r\n                this.subscribeChannel(channelsName);\r\n            }\r\n        });\r\n    }\r\n    stopListen(channelNames) {\r\n        channelNames.forEach((channelName) => {\r\n            const removedChannel = this.removeChannel(channelName);\r\n            if (removedChannel && this.connection.state === 'connected') {\r\n                removedChannel.leaveChannel();\r\n            }\r\n        });\r\n    }\r\n    subscribe(eventName, data, channel) {\r\n        return this.connection.bind(eventName, data, channel);\r\n    }\r\n    unsubscribe(eventName, data, channel) {\r\n        return this.connection.unbind(eventName, data, channel);\r\n    }\r\n    channel(channelName) {\r\n        return this.subscribeChannel(channelName);\r\n    }\r\n    addChannel(name, socket) {\r\n        if (!this.channels[name]) {\r\n            this.channels[name] = new _Channel__WEBPACK_IMPORTED_MODULE_0__[\"default\"](name, socket);\r\n        }\r\n        return this.channels[name];\r\n    }\r\n    joinChannel(chanelName) {\r\n        this.addStorageChannel(chanelName);\r\n        return this.sendEvent(CONNECTION_EVENTS.JOIN, [chanelName]);\r\n    }\r\n    leaveChannel(chanelName) {\r\n        this.removeStorageChannel(chanelName);\r\n        return this.sendEvent(CONNECTION_EVENTS.LEAVE, [chanelName]);\r\n    }\r\n    findChannel(name) {\r\n        return this.channels[name];\r\n    }\r\n    removeChannel(name) {\r\n        const channel = this.channels[name];\r\n        delete this.channels[name];\r\n        return channel;\r\n    }\r\n    channelsDisconnect() {\r\n        Object.values(this.channels).forEach((channel) => channel.disconnect());\r\n    }\r\n    subscribeChannel(channelName) {\r\n        const channel = this.addChannel(channelName, this);\r\n        if (channel.subscriptionCancelled) {\r\n            channel.reinstateSubscription();\r\n        }\r\n        else if (this.connection.state === 'connected') {\r\n            channel.join();\r\n        }\r\n        return channel;\r\n    }\r\n    getStorage() {\r\n        if (this.hasStorage) {\r\n            const storageData = window.localStorage.getItem(_constants__WEBPACK_IMPORTED_MODULE_3__[\"STORAGE_KEY\"]);\r\n            return storageData ? JSON.parse(storageData) : null;\r\n        }\r\n        return null;\r\n    }\r\n    addStorageChannel(channelName) {\r\n        if (this.hasStorage) {\r\n            const activeStorageChannels = this.getStorage();\r\n            if (activeStorageChannels) {\r\n                const activeChannels = activeStorageChannels.filter((channel) => channel !== channelName);\r\n                activeChannels.push(channelName);\r\n                this.setStorage(activeChannels);\r\n            }\r\n            else {\r\n                this.setStorage([channelName]);\r\n            }\r\n        }\r\n    }\r\n    removeStorageChannel(channelName) {\r\n        if (this.hasStorage) {\r\n            const activeStorage = this.getStorage();\r\n            if (activeStorage) {\r\n                const currentData = activeStorage.filter((channel) => channel !== channelName);\r\n                if (currentData.length) {\r\n                    this.setStorage(currentData);\r\n                }\r\n                else {\r\n                    this.clearStorage();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setStorage(args) {\r\n        if (this.hasStorage) {\r\n            return window.localStorage.setItem(_constants__WEBPACK_IMPORTED_MODULE_3__[\"STORAGE_KEY\"], JSON.stringify(args));\r\n        }\r\n        return null;\r\n    }\r\n    clearStorage() {\r\n        if (this.hasStorage) {\r\n            return window.localStorage.removeItem(_constants__WEBPACK_IMPORTED_MODULE_3__[\"STORAGE_KEY\"]);\r\n        }\r\n        return null;\r\n    }\r\n}\r\nSFSocket.instances = [];\r\nSFSocket.isReady = false;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvU0ZTb2NrZXQudHM/OWY3MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFnQztBQUNrQjtBQUNhO0FBQ047QUFDcEI7QUFFckMsTUFBTSxpQkFBaUIsR0FBRztJQUN4QixJQUFJLEVBQUUsTUFBTTtJQUNaLEtBQUssRUFBRSxPQUFPO0NBQ2YsQ0FBQztBQTJCSyxNQUFNLFFBQVE7SUF1Qm5CLFlBQVksT0FBeUI7UUFDbkMsSUFBSSxDQUFDLE9BQU8sSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7WUFDM0MsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO1NBQ3pEO1FBRUQsTUFBTSxrQkFBa0IsR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO1FBRXpDLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixHQUFHLHdEQUFhO1lBQ2hCLEdBQUcsa0JBQWtCO1NBQ3RCLENBQUM7UUFFRixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSx5REFBZ0IsRUFBRSxDQUFDO1FBRS9DLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFbkYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLHFFQUFpQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVyRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxpREFBUyxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUU7Z0JBQ2pELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxX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QztpQkFDOUI7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2lCQUNyQjthQUNGO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsVUFBVSxDQUFDLElBQWM7UUFDdkIsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsc0RBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDdkU7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxZQUFZO1FBQ1YsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsc0RBQVcsQ0FBQyxDQUFDO1NBQ3BEO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDOztBQXhPTSxrQkFBUyxHQUFlLEVBQUUsQ0FBQztBQUUzQixnQkFBTyxHQUFZLEtBQUssQ0FBQyIsImZpbGUiOiIuL2xpYi9TRlNvY2tldC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGFubmVsIGZyb20gJy4vQ2hhbm5lbCc7XHJcbmltcG9ydCBFdmVudHNEaXNwYXRjaGVyIGZyb20gJy4vRXZlbnRzRGlzcGF0Y2hlcic7XHJcbmltcG9ydCBDb25uZWN0aW9uTWFuYWdlciBmcm9tICcuL2Nvbm5lY3Rpb24vQ29ubmVjdGlvbk1hbmFnZXInO1xyXG5pbXBvcnQgeyBkZWZhdWx0Q29uZmlnLCBTVE9SQUdFX0tFWSB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSAnLi9ldmVudHMnO1xyXG5cclxuY29uc3QgQ09OTkVDVElPTl9FVkVOVFMgPSB7XHJcbiAgSk9JTjogJ2pvaW4nLFxyXG4gIExFQVZFOiAnbGVhdmUnLFxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ2hhbm5lbHMge1xyXG4gIFtuYW1lOiBzdHJpbmddOiBDaGFubmVsO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU0ZTb2NrZXRDb25maWcge1xyXG4gIGhvc3Q6IHN0cmluZyxcclxuICBwb3J0OiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgcG9ydFRMUz86IHN0cmluZyB8IG51bWJlcjtcclxuICBwYXRoOiBzdHJpbmc7XHJcbiAgdW5hdmFpbGFibGVUaW1lb3V0PzogbnVtYmVyO1xyXG4gIHVzZVRMUz86IGJvb2xlYW47XHJcbiAgdXNlU3RvcmFnZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNGU29ja2V0RXZlbnQge1xyXG4gIHR5cGU6IHN0cmluZyxcclxuICBkYXRhOiBzdHJpbmcgfCBudWxsLFxyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsLFxyXG4gIGNvbnRleHQ/OiB7XHJcbiAgICBjaGFubmVsPzogc3RyaW5nLFxyXG4gICAgY29kZT86IHN0cmluZyB8IG51bWJlcixcclxuICB9IHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU0ZTb2NrZXQge1xyXG4gIHN0YXRpYyBpbnN0YW5jZXM6IFNGU29ja2V0W10gPSBbXTtcclxuXHJcbiAgc3RhdGljIGlzUmVhZHk6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgc3RhdGljIHJlYWR5KCkge1xyXG4gICAgU0ZTb2NrZXQuaXNSZWFkeSA9IHRydWU7XHJcblxyXG4gICAgU0ZTb2NrZXQuaW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XHJcbiAgICAgIGluc3RhbmNlLmNvbm5lY3QoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uZmlnOiBJU0ZTb2NrZXRDb25maWc7XHJcblxyXG4gIGNoYW5uZWxzOiBJQ2hhbm5lbHM7XHJcblxyXG4gIGV2ZW50c0Rpc3BhdGNoZXI6IEV2ZW50c0Rpc3BhdGNoZXI7XHJcblxyXG4gIGNvbm5lY3Rpb246IENvbm5lY3Rpb25NYW5hZ2VyO1xyXG5cclxuICBoYXNTdG9yYWdlOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogSVNGU29ja2V0Q29uZmlnKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignc2ZTb2NrZXQgb3B0aW9ucyBzaG91bGQgYmUgYW4gb2JqZWN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uc3RydWN0b3JPcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgLi4uZGVmYXVsdENvbmZpZyxcclxuICAgICAgLi4uY29uc3RydWN0b3JPcHRpb25zLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNoYW5uZWxzID0ge307XHJcbiAgICB0aGlzLmV2ZW50c0Rpc3BhdGNoZXIgPSBuZXcgRXZlbnRzRGlzcGF0Y2hlcigpO1xyXG5cclxuICAgIHRoaXMuaGFzU3RvcmFnZSA9IEJvb2xlYW4odGhpcy5jb25maWcudXNlU3RvcmFnZSAmJiB3aW5kb3cgJiYgd2luZG93LmxvY2FsU3RvcmFnZSk7XHJcblxyXG4gICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb25NYW5hZ2VyKHRoaXMuY29uZmlnKTtcclxuXHJcbiAgICB0aGlzLmNvbm5lY3Rpb24uYmluZChFdmVudFR5cGUuQ09OTkVDVEVELCAoKSA9PiB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2hhbm5lbHMpLmZvckVhY2goKGNoYW5uZWxOYW1lKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVDaGFubmVsKGNoYW5uZWxOYW1lKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbm5lY3Rpb24uYmluZChFdmVudFR5cGUuTUVTU0FHRSwgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5ldmVudHNEaXNwYXRjaGVyLmVtaXQoRXZlbnRUeXBlLk1FU1NBR0UsIGV2ZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY29ubmVjdGlvbi5iaW5kKEV2ZW50VHlwZS5DT05ORUNUSU5HLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2hhbm5lbHNEaXNjb25uZWN0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbm5lY3Rpb24uYmluZChFdmVudFR5cGUuRElTQ09OTkVDVEVELCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2hhbm5lbHNEaXNjb25uZWN0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbm5lY3Rpb24uYmluZChFdmVudFR5cGUuRVJST1IsIChlcnI6IEVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXHJcbiAgICB9KTtcclxuXHJcbiAgICBTRlNvY2tldC5pbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuXHJcbiAgICBpZiAoU0ZTb2NrZXQuaXNSZWFkeSkge1xyXG4gICAgICB0aGlzLmNvbm5lY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5oYXNTdG9yYWdlKSB7XHJcbiAgICAgIGNvbnN0IGFjdGl2ZUNoYW5uZWxzOiBzdHJpbmdbXSA9IHRoaXMuZ2V0U3RvcmFnZSgpO1xyXG5cclxuICAgICAgaWYgKGFjdGl2ZUNoYW5uZWxzKSB7XHJcbiAgICAgICAgYWN0aXZlQ2hhbm5lbHMuZm9yRWFjaCgoY2hhbm5lbE5hbWUpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3Vic2NyaWJlQ2hhbm5lbChjaGFubmVsTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbm5lY3QoKSB7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gIH1cclxuXHJcbiAgZGlzY29ubmVjdCgpIHtcclxuICAgIHRoaXMuY29ubmVjdGlvbi5kaXNjb25uZWN0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBjb25uZWN0aW9uc1xyXG4gIHNlbmRFdmVudChldmVudE5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nW10sIGNoYW5uZWw/OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZEV2ZW50KGV2ZW50TmFtZSwgZGF0YSwgY2hhbm5lbCk7XHJcbiAgfVxyXG5cclxuICBqb2luKGRhdGE6IHN0cmluZ1tdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kRXZlbnQoQ09OTkVDVElPTl9FVkVOVFMuSk9JTiwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBsZWF2ZShkYXRhOiBzdHJpbmdbXSkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZEV2ZW50KENPTk5FQ1RJT05fRVZFTlRTLkxFQVZFLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIGxpc3RlbihjaGFubmVsc05hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgY2hhbm5lbHNOYW1lcy5mb3JFYWNoKChjaGFubmVsc05hbWUpID0+IHtcclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5zdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICB0aGlzLmpvaW5DaGFubmVsKGNoYW5uZWxzTmFtZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVDaGFubmVsKGNoYW5uZWxzTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RvcExpc3RlbihjaGFubmVsTmFtZXM6IHN0cmluZ1tdKSB7XHJcbiAgICBjaGFubmVsTmFtZXMuZm9yRWFjaCgoY2hhbm5lbE5hbWUpID0+IHtcclxuICAgICAgY29uc3QgcmVtb3ZlZENoYW5uZWwgPSB0aGlzLnJlbW92ZUNoYW5uZWwoY2hhbm5lbE5hbWUpO1xyXG4gICAgICBpZiAocmVtb3ZlZENoYW5uZWwgJiYgdGhpcy5jb25uZWN0aW9uLnN0YXRlID09PSAnY29ubmVjdGVkJykge1xyXG4gICAgICAgIHJlbW92ZWRDaGFubmVsLmxlYXZlQ2hhbm5lbCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZShldmVudE5hbWU6IEV2ZW50VHlwZSwgZGF0YTogYW55LCBjaGFubmVsPzogc3RyaW5nKSB7IC8vIFRPRE9cclxuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uYmluZChldmVudE5hbWUsIGRhdGEsIGNoYW5uZWwpO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoZXZlbnROYW1lOiBFdmVudFR5cGUsIGRhdGE6IGFueSwgY2hhbm5lbD86IHN0cmluZykgeyAvLyBUT0RPXHJcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnVuYmluZChldmVudE5hbWUsIGRhdGEsIGNoYW5uZWwpO1xyXG4gIH1cclxuXHJcbiAgLy8gY2hhbm5lbHNcclxuICBjaGFubmVsKGNoYW5uZWxOYW1lOiBzdHJpbmcpOiBDaGFubmVsIHtcclxuICAgIHJldHVybiB0aGlzLnN1YnNjcmliZUNoYW5uZWwoY2hhbm5lbE5hbWUpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2hhbm5lbChuYW1lIDogc3RyaW5nLCBzb2NrZXQgOiBTRlNvY2tldCkge1xyXG4gICAgaWYgKCF0aGlzLmNoYW5uZWxzW25hbWVdKSB7XHJcbiAgICAgIHRoaXMuY2hhbm5lbHNbbmFtZV0gPSBuZXcgQ2hhbm5lbChuYW1lLCBzb2NrZXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY2hhbm5lbHNbbmFtZV07XHJcbiAgfVxyXG5cclxuICBqb2luQ2hhbm5lbChjaGFuZWxOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuYWRkU3RvcmFnZUNoYW5uZWwoY2hhbmVsTmFtZSk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kRXZlbnQoQ09OTkVDVElPTl9FVkVOVFMuSk9JTiwgW2NoYW5lbE5hbWVdKTtcclxuICB9XHJcblxyXG4gIGxlYXZlQ2hhbm5lbChjaGFuZWxOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMucmVtb3ZlU3RvcmFnZUNoYW5uZWwoY2hhbmVsTmFtZSk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kRXZlbnQoQ09OTkVDVElPTl9FVkVOVFMuTEVBVkUsIFtjaGFuZWxOYW1lXSk7XHJcbiAgfVxyXG5cclxuICBmaW5kQ2hhbm5lbChuYW1lOiBzdHJpbmcpOiBDaGFubmVsIHtcclxuICAgIHJldHVybiB0aGlzLmNoYW5uZWxzW25hbWVdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVDaGFubmVsKG5hbWUgOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmNoYW5uZWxzW25hbWVdO1xyXG4gICAgZGVsZXRlIHRoaXMuY2hhbm5lbHNbbmFtZV07XHJcbiAgICByZXR1cm4gY2hhbm5lbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hhbm5lbHNEaXNjb25uZWN0KCkge1xyXG4gICAgT2JqZWN0LnZhbHVlcyh0aGlzLmNoYW5uZWxzKS5mb3JFYWNoKChjaGFubmVsOiBDaGFubmVsKSA9PiBjaGFubmVsLmRpc2Nvbm5lY3QoKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN1YnNjcmliZUNoYW5uZWwoY2hhbm5lbE5hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuYWRkQ2hhbm5lbChjaGFubmVsTmFtZSwgdGhpcyk7XHJcblxyXG4gICAgaWYgKGNoYW5uZWwuc3Vic2NyaXB0aW9uQ2FuY2VsbGVkKSB7XHJcbiAgICAgIGNoYW5uZWwucmVpbnN0YXRlU3Vic2NyaXB0aW9uKCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdGlvbi5zdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgY2hhbm5lbC5qb2luKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhbm5lbDtcclxuICB9XHJcblxyXG4gIC8vIHN0b3JhZ2VcclxuICBnZXRTdG9yYWdlKCkge1xyXG4gICAgaWYgKHRoaXMuaGFzU3RvcmFnZSkge1xyXG4gICAgICBjb25zdCBzdG9yYWdlRGF0YSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XHJcblxyXG4gICAgICByZXR1cm4gc3RvcmFnZURhdGEgPyBKU09OLnBhcnNlKHN0b3JhZ2VEYXRhKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBhZGRTdG9yYWdlQ2hhbm5lbChjaGFubmVsTmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5oYXNTdG9yYWdlKSB7XHJcbiAgICAgIGNvbnN0IGFjdGl2ZVN0b3JhZ2VDaGFubmVscyA9IHRoaXMuZ2V0U3RvcmFnZSgpO1xyXG5cclxuICAgICAgaWYgKGFjdGl2ZVN0b3JhZ2VDaGFubmVscykgeyAvLyByZW1vdmUgb2xkZXIgcmVjb3Jkc1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUNoYW5uZWxzID0gYWN0aXZlU3RvcmFnZUNoYW5uZWxzLmZpbHRlcigoY2hhbm5lbDogc3RyaW5nKSA9PiBjaGFubmVsICE9PSBjaGFubmVsTmFtZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbWF4LWxlblxyXG5cclxuICAgICAgICBhY3RpdmVDaGFubmVscy5wdXNoKGNoYW5uZWxOYW1lKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdG9yYWdlKGFjdGl2ZUNoYW5uZWxzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFN0b3JhZ2UoW2NoYW5uZWxOYW1lXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZVN0b3JhZ2VDaGFubmVsKGNoYW5uZWxOYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmhhc1N0b3JhZ2UpIHtcclxuICAgICAgY29uc3QgYWN0aXZlU3RvcmFnZSA9IHRoaXMuZ2V0U3RvcmFnZSgpO1xyXG5cclxuICAgICAgaWYgKGFjdGl2ZVN0b3JhZ2UpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0YSA9IGFjdGl2ZVN0b3JhZ2UuZmlsdGVyKChjaGFubmVsOiBzdHJpbmcpID0+IGNoYW5uZWwgIT09IGNoYW5uZWxOYW1lKTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnREYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdG9yYWdlKGN1cnJlbnREYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jbGVhclN0b3JhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFN0b3JhZ2UoYXJnczogc3RyaW5nW10pIHtcclxuICAgIGlmICh0aGlzLmhhc1N0b3JhZ2UpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoYXJncykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJTdG9yYWdlKCkge1xyXG4gICAgaWYgKHRoaXMuaGFzU3RvcmFnZSkge1xyXG4gICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/SFSocket.ts\n");

/***/ }),

/***/ "./lib/Transport.ts":
/*!**************************!*\
  !*** ./lib/Transport.ts ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Transport; });\n/* harmony import */ var _connection_Connection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connection/Connection */ \"./lib/connection/Connection.ts\");\n/* harmony import */ var _TransportConnection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransportConnection */ \"./lib/TransportConnection.ts\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ \"./lib/events.ts\");\n\r\n\r\n\r\nclass Transport {\r\n    constructor(name, options) {\r\n        this.options = options || {};\r\n        const scheme = `ws${options.useTLS ? 's' : ''}`;\r\n        const host = options.useTLS ? (`${options.host}:${options.portTLS}`) : (`${options.host}:${options.port}`);\r\n        const url = `${scheme}://${host}/${options.path}`;\r\n        this.hooks = {\r\n            url,\r\n            isInitialized() {\r\n                return !!window.WebSocket;\r\n            },\r\n            getSocket(socketUrl) {\r\n                return new WebSocket(socketUrl);\r\n            },\r\n        };\r\n        this.name = name;\r\n    }\r\n    connect(callback) {\r\n        let connected = false;\r\n        const transport = new _TransportConnection__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.hooks, this.name);\r\n        const onInitialized = () => {\r\n            transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].INITIALIZED, onInitialized);\r\n            transport.connect();\r\n        };\r\n        const unbindListeners = () => {\r\n            transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].INITIALIZED, onInitialized);\r\n            transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].OPEN, onOpen);\r\n            transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, onError);\r\n            transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, onClosed);\r\n        };\r\n        const onOpen = () => {\r\n            connected = true;\r\n            unbindListeners();\r\n            const result = new _connection_Connection__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('', transport);\r\n            callback(null, result);\r\n        };\r\n        const onError = (error) => {\r\n            unbindListeners();\r\n            callback(error);\r\n        };\r\n        const onClosed = () => {\r\n            unbindListeners();\r\n        };\r\n        transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].INITIALIZED, onInitialized);\r\n        transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].OPEN, onOpen);\r\n        transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, onError);\r\n        transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, onClosed);\r\n        transport.initialize();\r\n        return {\r\n            abort: () => {\r\n                if (connected) {\r\n                    return;\r\n                }\r\n                unbindListeners();\r\n                transport.close();\r\n            },\r\n        };\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvVHJhbnNwb3J0LnRzPzk4ZWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFpRDtBQUM0QjtBQUV4QztBQVV0QixNQUFNLFNBQVM7SUFPNUIsWUFBWSxJQUFZLEVBQUUsT0FBd0I7UUFDaEQsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO1FBRTdCLE1BQU0sTUFBTSxHQUFHLEtBQUssT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNoRCxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFFM0csTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLE1BQU0sSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVsRCxJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1gsR0FBRztZQUNILGFBQWE7Z0JBQ1gsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztZQUM1QixDQUFDO1lBQ0QsU0FBUyxDQUFDLFNBQVM7Z0JBQ2pCLE9BQU8sSUFBSSxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDbEMsQ0FBQztTQUNGLENBQUM7UUFDRixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRUQsT0FBTyxDQUFDLFFBQWtCO1FBQ3hCLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztRQUV0QixNQUFNLFNBQVMsR0FBRyxJQUFJLDREQUFtQixDQUN2QyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQ3RCLENBQUM7UUFFRixNQUFNLGFBQWEsR0FBRyxHQUFHLEVBQUU7WUFDekIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpREFBUyxDQUFDLFdBQVcsRUFBRSxhQUFhLENBQUMsQ0FBQztZQUN2RCxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdEIsQ0FBQyxDQUFDO1FBRUYsTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFO1lBQzNCLFNBQVMsQ0FBQyxNQUFNLENBQUMsaURBQVMsQ0FBQyxXQUFXLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFdkQsU0FBUyxDQUFDLE1BQU0sQ0FBQyxpREFBUyxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztZQUV6QyxTQUFTLENBQUMsTUFBTSxDQUFDLGlEQUFTLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBRTNDLFNBQVMsQ0FBQyxNQUFNLENBQUMsaURBQVMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDO1FBRUYsTUFBTSxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQ2xCLFNBQVMsR0FBRyxJQUFJLENBQUM7WUFDakIsZUFBZSxFQUFFLENBQUM7WUFDbEIsTUFBTSxNQUFNLEdBQUcsSUFBSSw4REFBVSxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM3QyxRQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFHLENBQUMsS0FBVSxFQUFFLEVBQUU7WUFDN0IsZUFBZSxFQUFFLENBQUM7WUFDbEIsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xCLENBQUMsQ0FBQztRQUVGLE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNwQixlQUFlLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUM7UUFFRixTQUFTLENBQUMsSUFBSSxDQUFDLGlEQUFTLENBQUMsV0FBVyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQ3JELFNBQVMsQ0FBQyxJQUFJLENBQUMsaURBQVMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDdkMsU0FBUyxDQUFDLElBQUksQ0FBQyxpREFBUyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN6QyxTQUFTLENBQUMsSUFBSSxDQUFDLGlEQUFTLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBRTNDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUV2QixPQUFPO1lBQ0wsS0FBSyxFQUFFLEdBQUcsRUFBRTtnQkFDVixJQUFJLFNBQVMsRUFBRTtvQkFDYixPQUFPO2lCQUNSO2dCQUNELGVBQWUsRUFBRSxDQUFDO2dCQUNsQixTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDcEIsQ0FBQztTQUNGLENBQUM7SUFDSixDQUFDO0NBQ0YiLCJmaWxlIjoiLi9saWIvVHJhbnNwb3J0LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi9jb25uZWN0aW9uL0Nvbm5lY3Rpb24nO1xyXG5pbXBvcnQgVHJhbnNwb3J0Q29ubmVjdGlvbiwgeyBJVHJhbnNwb3J0SG9va3MgfSBmcm9tICcuL1RyYW5zcG9ydENvbm5lY3Rpb24nO1xyXG5pbXBvcnQgeyBJU0ZTb2NrZXRDb25maWcgfSBmcm9tICcuL1NGU29ja2V0JztcclxuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSAnLi9ldmVudHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUnVubmVyIHtcclxuICBhYm9ydDogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVHJhbnNwb3J0IHtcclxuICBjb25uZWN0KGNhbGxiYWNrOiBGdW5jdGlvbik6IElSdW5uZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zcG9ydCBpbXBsZW1lbnRzIElUcmFuc3BvcnQge1xyXG4gIGhvb2tzOiBJVHJhbnNwb3J0SG9va3M7XHJcblxyXG4gIG5hbWU6IHN0cmluZztcclxuXHJcbiAgb3B0aW9uczogSVNGU29ja2V0Q29uZmlnO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IElTRlNvY2tldENvbmZpZykge1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBjb25zdCBzY2hlbWUgPSBgd3Mke29wdGlvbnMudXNlVExTID8gJ3MnIDogJyd9YDtcclxuICAgIGNvbnN0IGhvc3QgPSBvcHRpb25zLnVzZVRMUyA/IChgJHtvcHRpb25zLmhvc3R9OiR7b3B0aW9ucy5wb3J0VExTfWApIDogKGAke29wdGlvbnMuaG9zdH06JHtvcHRpb25zLnBvcnR9YCk7XHJcblxyXG4gICAgY29uc3QgdXJsID0gYCR7c2NoZW1lfTovLyR7aG9zdH0vJHtvcHRpb25zLnBhdGh9YDtcclxuXHJcbiAgICB0aGlzLmhvb2tzID0ge1xyXG4gICAgICB1cmwsXHJcbiAgICAgIGlzSW5pdGlhbGl6ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICEhd2luZG93LldlYlNvY2tldDtcclxuICAgICAgfSxcclxuICAgICAgZ2V0U29ja2V0KHNvY2tldFVybCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgV2ViU29ja2V0KHNvY2tldFVybCk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB9XHJcblxyXG4gIGNvbm5lY3QoY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBsZXQgY29ubmVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IFRyYW5zcG9ydENvbm5lY3Rpb24oXHJcbiAgICAgIHRoaXMuaG9va3MsIHRoaXMubmFtZSxcclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgb25Jbml0aWFsaXplZCA9ICgpID0+IHtcclxuICAgICAgdHJhbnNwb3J0LnVuYmluZChFdmVudFR5cGUuSU5JVElBTElaRUQsIG9uSW5pdGlhbGl6ZWQpO1xyXG4gICAgICB0cmFuc3BvcnQuY29ubmVjdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB1bmJpbmRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgIHRyYW5zcG9ydC51bmJpbmQoRXZlbnRUeXBlLklOSVRJQUxJWkVELCBvbkluaXRpYWxpemVkKTtcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXHJcbiAgICAgIHRyYW5zcG9ydC51bmJpbmQoRXZlbnRUeXBlLk9QRU4sIG9uT3Blbik7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxyXG4gICAgICB0cmFuc3BvcnQudW5iaW5kKEV2ZW50VHlwZS5FUlJPUiwgb25FcnJvcik7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxyXG4gICAgICB0cmFuc3BvcnQudW5iaW5kKEV2ZW50VHlwZS5DTE9TRUQsIG9uQ2xvc2VkKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25PcGVuID0gKCkgPT4ge1xyXG4gICAgICBjb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICB1bmJpbmRMaXN0ZW5lcnMoKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IENvbm5lY3Rpb24oJycsIHRyYW5zcG9ydCk7XHJcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyb3I6IGFueSkgPT4geyAvLyBUT0RPXHJcbiAgICAgIHVuYmluZExpc3RlbmVycygpO1xyXG4gICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uQ2xvc2VkID0gKCkgPT4ge1xyXG4gICAgICB1bmJpbmRMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgdHJhbnNwb3J0LmJpbmQoRXZlbnRUeXBlLklOSVRJQUxJWkVELCBvbkluaXRpYWxpemVkKTtcclxuICAgIHRyYW5zcG9ydC5iaW5kKEV2ZW50VHlwZS5PUEVOLCBvbk9wZW4pO1xyXG4gICAgdHJhbnNwb3J0LmJpbmQoRXZlbnRUeXBlLkVSUk9SLCBvbkVycm9yKTtcclxuICAgIHRyYW5zcG9ydC5iaW5kKEV2ZW50VHlwZS5DTE9TRUQsIG9uQ2xvc2VkKTtcclxuXHJcbiAgICB0cmFuc3BvcnQuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFib3J0OiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1bmJpbmRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0cmFuc3BvcnQuY2xvc2UoKTtcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Transport.ts\n");

/***/ }),

/***/ "./lib/TransportConnection.ts":
/*!************************************!*\
  !*** ./lib/TransportConnection.ts ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TransportConnection; });\n/* harmony import */ var _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventsDispatcher */ \"./lib/EventsDispatcher.ts\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events */ \"./lib/events.ts\");\n\r\n\r\nclass TransportConnection extends _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(hooks, name) {\r\n        super();\r\n        this.initialize = () => {\r\n            const self = this;\r\n            if (self.hooks.isInitialized()) {\r\n                self.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].INITIALIZED);\r\n            }\r\n            else {\r\n                self.onClose();\r\n            }\r\n        };\r\n        this.hooks = hooks;\r\n        this.name = name;\r\n        this.state = 'new';\r\n    }\r\n    connect() {\r\n        if (this.socket || this.state !== 'initialized') {\r\n            return false;\r\n        }\r\n        const { url } = this.hooks;\r\n        try {\r\n            this.socket = this.hooks.getSocket(url);\r\n        }\r\n        catch (e) {\r\n            setTimeout(() => {\r\n                this.onError(e);\r\n                this.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].CLOSED);\r\n            });\r\n            return false;\r\n        }\r\n        this.bindListeners();\r\n        this.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].CONNECTING);\r\n        return true;\r\n    }\r\n    close() {\r\n        if (this.socket) {\r\n            this.socket.close();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    send(data) {\r\n        if (this.state === 'open') {\r\n            setTimeout(() => {\r\n                if (this.socket) {\r\n                    this.socket.send(data);\r\n                }\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    unbindListeners() {\r\n        if (!this.socket)\r\n            return;\r\n        this.socket.onopen = null;\r\n        this.socket.onerror = null;\r\n        this.socket.onclose = null;\r\n        this.socket.onmessage = null;\r\n    }\r\n    onOpen() {\r\n        this.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].OPEN);\r\n        if (!this.socket)\r\n            return;\r\n        this.socket.onopen = null;\r\n    }\r\n    onError(error) {\r\n        this.emit(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].ERROR, {\r\n            type: 'sfSocket:error',\r\n            error: error || 'websocket connection error',\r\n            data: null,\r\n        });\r\n    }\r\n    onClose(closeEvent) {\r\n        if (closeEvent) {\r\n            this.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].CLOSED, {\r\n                type: closeEvent.wasClean ? 'sfSocket:closed' : 'sfSocket:error',\r\n                data: closeEvent.wasClean ? closeEvent.reason : null,\r\n                error: closeEvent.wasClean ? null : closeEvent.reason,\r\n                context: {\r\n                    code: closeEvent.code,\r\n                },\r\n            });\r\n        }\r\n        else {\r\n            this.changeState(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].CLOSED);\r\n        }\r\n        this.unbindListeners();\r\n        this.socket = undefined;\r\n    }\r\n    onMessage(message) {\r\n        this.emit(_events__WEBPACK_IMPORTED_MODULE_1__[\"EventType\"].MESSAGE, {\r\n            type: 'sfSocket:message',\r\n            data: typeof message.data === 'string' ? message.data : JSON.stringify(message.data),\r\n            error: null,\r\n        });\r\n    }\r\n    bindListeners() {\r\n        if (!this.socket)\r\n            return;\r\n        this.socket.onopen = () => {\r\n            this.onOpen();\r\n        };\r\n        this.socket.onerror = () => {\r\n            this.onError();\r\n        };\r\n        this.socket.onclose = (closeEvent) => {\r\n            this.onClose(closeEvent);\r\n        };\r\n        this.socket.onmessage = (message) => {\r\n            this.onMessage(message);\r\n        };\r\n    }\r\n    changeState(state, params) {\r\n        this.state = state;\r\n        this.emit(state, params);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvVHJhbnNwb3J0Q29ubmVjdGlvbi50cz9iZmM3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQWtEO0FBRWI7QUFRdEIsTUFBTSxtQkFBb0IsU0FBUSx5REFBZ0I7SUFXL0QsWUFBWSxLQUF1QixFQUFFLElBQWE7UUFDaEQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsRUFBRTtZQUNyQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7WUFFbEIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxFQUFFO2dCQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLGlEQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDekM7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ2hCO1FBQ0gsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFFakIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDckIsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxhQUFhLEVBQUU7WUFDL0MsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzNCLElBQUk7WUFDRixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3pDO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFFVixVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNkLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLElBQUksQ0FBQyxXQUFXLENBQUMsaURB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LENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3BGLEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLGFBQWE7UUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO1lBQUUsT0FBTztRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7WUFDeEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQztRQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRTtZQUN6QixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxVQUFzQixFQUFFLEVBQUU7WUFDL0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMzQixDQUFDLENBQUM7UUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLE9BQXFCLEVBQUUsRUFBRTtZQUNoRCxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFCLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFTyxXQUFXLENBQUMsS0FBZ0IsRUFBRSxNQUF1QjtRQUMzRCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMzQixDQUFDO0NBQ0YiLCJmaWxlIjoiLi9saWIvVHJhbnNwb3J0Q29ubmVjdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudHNEaXNwYXRjaGVyIGZyb20gJy4vRXZlbnRzRGlzcGF0Y2hlcic7XHJcbmltcG9ydCB7IElTRlNvY2tldENvbmZpZywgSVNGU29ja2V0RXZlbnQgfSBmcm9tICcuL1NGU29ja2V0JztcclxuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSAnLi9ldmVudHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVHJhbnNwb3J0SG9va3Mge1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbjtcclxuICBnZXRTb2NrZXQodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBJU0ZTb2NrZXRDb25maWcpOiBXZWJTb2NrZXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zcG9ydENvbm5lY3Rpb24gZXh0ZW5kcyBFdmVudHNEaXNwYXRjaGVyIHtcclxuICBob29rczogSVRyYW5zcG9ydEhvb2tzO1xyXG5cclxuICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gIHN0YXRlOiBzdHJpbmc7XHJcblxyXG4gIHNvY2tldD86IFdlYlNvY2tldDtcclxuXHJcbiAgaW5pdGlhbGl6ZTogRnVuY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKGhvb2tzIDogSVRyYW5zcG9ydEhvb2tzLCBuYW1lIDogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgIGlmIChzZWxmLmhvb2tzLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHNlbGYuY2hhbmdlU3RhdGUoRXZlbnRUeXBlLklOSVRJQUxJWkVEKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxmLm9uQ2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuaG9va3MgPSBob29rcztcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9ICduZXcnO1xyXG4gIH1cclxuXHJcbiAgY29ubmVjdCgpIDogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5zb2NrZXQgfHwgdGhpcy5zdGF0ZSAhPT0gJ2luaXRpYWxpemVkJykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyB1cmwgfSA9IHRoaXMuaG9va3M7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNvY2tldCA9IHRoaXMuaG9va3MuZ2V0U29ja2V0KHVybCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIE1vYmlsZVNhZmFyaSBidWcgKHNlZSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8yMDUyMDA2KVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLm9uRXJyb3IoZSk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShFdmVudFR5cGUuQ0xPU0VEKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJpbmRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuY2hhbmdlU3RhdGUoRXZlbnRUeXBlLkNPTk5FQ1RJTkcpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKiogQ2xvc2VzIHRoZSBjb25uZWN0aW9uLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGVyZSB3YXMgYSBjb25uZWN0aW9uIHRvIGNsb3NlXHJcbiAgICovXHJcbiAgY2xvc2UoKSA6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc2VuZChkYXRhIDogYW55KSA6IGJvb2xlYW4geyAvLyBUT0RPXHJcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ29wZW4nKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIE1vYmlsZVNhZmFyaSBidWcgKHNlZSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8yMDUyMDA2KVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgIHRoaXMuc29ja2V0LnNlbmQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVuYmluZExpc3RlbmVycygpIHtcclxuICAgIGlmICghdGhpcy5zb2NrZXQpIHJldHVybjtcclxuICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IG51bGw7XHJcbiAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gbnVsbDtcclxuICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSBudWxsO1xyXG4gICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gbnVsbDtcclxuICB9XHJcblxyXG5cclxuICBwcml2YXRlIG9uT3BlbigpIHtcclxuICAgIHRoaXMuY2hhbmdlU3RhdGUoRXZlbnRUeXBlLk9QRU4pO1xyXG4gICAgaWYgKCF0aGlzLnNvY2tldCkgcmV0dXJuO1xyXG4gICAgdGhpcy5zb2NrZXQub25vcGVuID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FcnJvcihlcnJvcj86IHN0cmluZykge1xyXG4gICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5FUlJPUiwge1xyXG4gICAgICB0eXBlOiAnc2ZTb2NrZXQ6ZXJyb3InLFxyXG4gICAgICBlcnJvcjogZXJyb3IgfHwgJ3dlYnNvY2tldCBjb25uZWN0aW9uIGVycm9yJyxcclxuICAgICAgZGF0YTogbnVsbCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkNsb3NlKGNsb3NlRXZlbnQ/OiBDbG9zZUV2ZW50KSB7XHJcbiAgICBpZiAoY2xvc2VFdmVudCkge1xyXG4gICAgICB0aGlzLmNoYW5nZVN0YXRlKEV2ZW50VHlwZS5DTE9TRUQsIHtcclxuICAgICAgICB0eXBlOiBjbG9zZUV2ZW50Lndhc0NsZWFuID8gJ3NmU29ja2V0OmNsb3NlZCcgOiAnc2ZTb2NrZXQ6ZXJyb3InLFxyXG4gICAgICAgIGRhdGE6IGNsb3NlRXZlbnQud2FzQ2xlYW4gPyBjbG9zZUV2ZW50LnJlYXNvbiA6IG51bGwsXHJcbiAgICAgICAgZXJyb3I6IGNsb3NlRXZlbnQud2FzQ2xlYW4gPyBudWxsIDogY2xvc2VFdmVudC5yZWFzb24sXHJcbiAgICAgICAgY29udGV4dDoge1xyXG4gICAgICAgICAgY29kZTogY2xvc2VFdmVudC5jb2RlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShFdmVudFR5cGUuQ0xPU0VEKTtcclxuICAgIH1cclxuICAgIHRoaXMudW5iaW5kTGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnNvY2tldCA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25NZXNzYWdlKG1lc3NhZ2U6IE1lc3NhZ2VFdmVudCkge1xyXG4gICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5NRVNTQUdFLCB7XHJcbiAgICAgIHR5cGU6ICdzZlNvY2tldDptZXNzYWdlJyxcclxuICAgICAgZGF0YTogdHlwZW9mIG1lc3NhZ2UuZGF0YSA9PT0gJ3N0cmluZycgPyBtZXNzYWdlLmRhdGEgOiBKU09OLnN0cmluZ2lmeShtZXNzYWdlLmRhdGEpLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBiaW5kTGlzdGVuZXJzKCkge1xyXG4gICAgaWYgKCF0aGlzLnNvY2tldCkgcmV0dXJuO1xyXG4gICAgdGhpcy5zb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMub25FcnJvcigpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSAoY2xvc2VFdmVudDogQ2xvc2VFdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2xvc2UoY2xvc2VFdmVudCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gKG1lc3NhZ2U6IE1lc3NhZ2VFdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLm9uTWVzc2FnZShtZXNzYWdlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoYW5nZVN0YXRlKHN0YXRlOiBFdmVudFR5cGUsIHBhcmFtcz86IElTRlNvY2tldEV2ZW50KSB7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICB0aGlzLmVtaXQoc3RhdGUsIHBhcmFtcyk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/TransportConnection.ts\n");

/***/ }),

/***/ "./lib/connection/Connection.ts":
/*!**************************************!*\
  !*** ./lib/connection/Connection.ts ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Connection; });\n/* harmony import */ var _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventsDispatcher */ \"./lib/EventsDispatcher.ts\");\n/* harmony import */ var _messageCodingUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messageCodingUtils */ \"./lib/messageCodingUtils.ts\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events */ \"./lib/events.ts\");\n\r\n\r\n\r\nclass Connection extends _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(id, transport) {\r\n        super();\r\n        this.id = id;\r\n        this.transport = transport;\r\n        this.bindListeners();\r\n    }\r\n    send(data) {\r\n        if (!this.transport)\r\n            return false;\r\n        return this.transport.send(data);\r\n    }\r\n    sendEvent(name, data, channel) {\r\n        const event = {\r\n            type: name,\r\n            data,\r\n            error: null,\r\n        };\r\n        if (channel) {\r\n            event.context = { channel };\r\n        }\r\n        return this.send(Object(_messageCodingUtils__WEBPACK_IMPORTED_MODULE_1__[\"encodeMessage\"])(event));\r\n    }\r\n    close() {\r\n        if (this.transport) {\r\n            this.transport.close();\r\n        }\r\n    }\r\n    bindListeners() {\r\n        const unbindListeners = (listeners) => {\r\n            if (!this.transport)\r\n                return;\r\n            this.transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, listeners.message);\r\n            this.transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, listeners.error);\r\n            this.transport.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, listeners.closed);\r\n        };\r\n        const listeners = {\r\n            message: (messageEvent) => {\r\n                let sfSocketEvent = null;\r\n                try {\r\n                    sfSocketEvent = Object(_messageCodingUtils__WEBPACK_IMPORTED_MODULE_1__[\"decodeMessage\"])(messageEvent.data);\r\n                }\r\n                catch (e) {\r\n                    this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, {\r\n                        type: 'MessageParseError',\r\n                        error: e,\r\n                        data: typeof messageEvent === 'string' ? messageEvent : JSON.stringify(messageEvent),\r\n                    });\r\n                }\r\n                if (sfSocketEvent) {\r\n                    if (sfSocketEvent.type === 'sfSocket:error') {\r\n                        this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, {\r\n                            type: 'sfSocket:error',\r\n                            data: sfSocketEvent.data,\r\n                            error: null,\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, sfSocketEvent);\r\n                    }\r\n                }\r\n            },\r\n            error: (error) => {\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, {\r\n                    type: 'sfSocket:error',\r\n                    error,\r\n                    data: null,\r\n                });\r\n            },\r\n            closed: (closeEvent) => {\r\n                unbindListeners(listeners);\r\n                if (closeEvent && closeEvent.context && closeEvent.context.code) {\r\n                    this.handleCloseEvent(closeEvent);\r\n                }\r\n                this.transport = null;\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED);\r\n            },\r\n        };\r\n        if (!this.transport)\r\n            return;\r\n        this.transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, listeners.message);\r\n        this.transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, listeners.error);\r\n        this.transport.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, listeners.closed);\r\n    }\r\n    handleCloseEvent(closeEvent) {\r\n        const action = Object(_messageCodingUtils__WEBPACK_IMPORTED_MODULE_1__[\"prepareCloseAction\"])(closeEvent);\r\n        if (action.type === 'sfSocket:closed') {\r\n            this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, action);\r\n        }\r\n        else {\r\n            this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, action);\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvY29ubmVjdGlvbi9Db25uZWN0aW9uLnRzPzkyY2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFtRDtBQUdzQztBQUNuRDtBQUV2QixNQUFNLFVBQVcsU0FBUSx5REFBZ0I7SUFLdEQsWUFBWSxFQUFXLEVBQUUsU0FBK0I7UUFDdEQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxDQUFDLElBQWE7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDbEMsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsU0FBUyxDQUFDLElBQWEsRUFBRSxJQUFVLEVBQUUsT0FBZ0I7UUFDbkQsTUFBTSxLQUFLLEdBQW1CO1lBQzVCLElBQUksRUFBRSxJQUFJO1lBQ1YsSUFBSTtZQUNKLEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQztRQUVGLElBQUksT0FBTyxFQUFFO1lBQ1gsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDO1NBQzdCO1FBRUQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLHlFQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsS0FBSztRQUNILElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQztJQUVPLGFBQWE7UUFDbkIsTUFBTSxlQUFlLEdBQUcsQ0FBQyxTQUFjLEVBQUUsRUFBRTtZQUN6QyxJQUFJLENBQUMsSUFB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QixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRTlDLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxpQkFBaUIsRUFBRTtZQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlEQUFTLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3JDO2FBQU07WUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLGlEQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3BDO0lBQ0gsQ0FBQztDQUNGIiwiZmlsZSI6Ii4vbGliL2Nvbm5lY3Rpb24vQ29ubmVjdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudHNEaXNwYXRjaGVyIGZyb20gJy4uL0V2ZW50c0Rpc3BhdGNoZXInO1xyXG5pbXBvcnQgeyBJU0ZTb2NrZXRFdmVudCB9IGZyb20gJy4uL1NGU29ja2V0JztcclxuaW1wb3J0IFRyYW5zcG9ydENvbm5lY3Rpb24gZnJvbSAnLi4vVHJhbnNwb3J0Q29ubmVjdGlvbic7XHJcbmltcG9ydCB7IGRlY29kZU1lc3NhZ2UsIGVuY29kZU1lc3NhZ2UsIHByZXBhcmVDbG9zZUFjdGlvbiB9IGZyb20gJy4uL21lc3NhZ2VDb2RpbmdVdGlscyc7XHJcbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gJy4uL2V2ZW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRzRGlzcGF0Y2hlciB7XHJcbiAgaWQ6IHN0cmluZztcclxuXHJcbiAgdHJhbnNwb3J0OiBUcmFuc3BvcnRDb25uZWN0aW9uIHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoaWQgOiBzdHJpbmcsIHRyYW5zcG9ydCA6IFRyYW5zcG9ydENvbm5lY3Rpb24pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcclxuICAgIHRoaXMuYmluZExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2VuZChkYXRhIDogc3RyaW5nKSA6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCF0aGlzLnRyYW5zcG9ydCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LnNlbmQoZGF0YSk7XHJcbiAgfVxyXG5cclxuICBzZW5kRXZlbnQobmFtZSA6IHN0cmluZywgZGF0YSA6IGFueSwgY2hhbm5lbD86IHN0cmluZykgOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGV2ZW50OiBJU0ZTb2NrZXRFdmVudCA9IHtcclxuICAgICAgdHlwZTogbmFtZSxcclxuICAgICAgZGF0YSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChjaGFubmVsKSB7XHJcbiAgICAgIGV2ZW50LmNvbnRleHQgPSB7IGNoYW5uZWwgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKGVuY29kZU1lc3NhZ2UoZXZlbnQpKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgaWYgKHRoaXMudHJhbnNwb3J0KSB7XHJcbiAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGJpbmRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCB1bmJpbmRMaXN0ZW5lcnMgPSAobGlzdGVuZXJzOiBhbnkpID0+IHsgLy8gVE9ET1xyXG4gICAgICBpZiAoIXRoaXMudHJhbnNwb3J0KSByZXR1cm47XHJcbiAgICAgIHRoaXMudHJhbnNwb3J0LnVuYmluZChFdmVudFR5cGUuTUVTU0FHRSwgbGlzdGVuZXJzLm1lc3NhZ2UpO1xyXG4gICAgICB0aGlzLnRyYW5zcG9ydC51bmJpbmQoRXZlbnRUeXBlLkVSUk9SLCBsaXN0ZW5lcnMuZXJyb3IpO1xyXG4gICAgICB0aGlzLnRyYW5zcG9ydC51bmJpbmQoRXZlbnRUeXBlLkNMT1NFRCwgbGlzdGVuZXJzLmNsb3NlZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHtcclxuICAgICAgbWVzc2FnZTogKG1lc3NhZ2VFdmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgbGV0IHNmU29ja2V0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBzZlNvY2tldEV2ZW50ID0gZGVjb2RlTWVzc2FnZShtZXNzYWdlRXZlbnQuZGF0YSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5FUlJPUiwge1xyXG4gICAgICAgICAgICB0eXBlOiAnTWVzc2FnZVBhcnNlRXJyb3InLFxyXG4gICAgICAgICAgICBlcnJvcjogZSxcclxuICAgICAgICAgICAgZGF0YTogdHlwZW9mIG1lc3NhZ2VFdmVudCA9PT0gJ3N0cmluZycgPyBtZXNzYWdlRXZlbnQgOiBKU09OLnN0cmluZ2lmeShtZXNzYWdlRXZlbnQpLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2ZTb2NrZXRFdmVudCkge1xyXG4gICAgICAgICAgaWYgKHNmU29ja2V0RXZlbnQudHlwZSA9PT0gJ3NmU29ja2V0OmVycm9yJykge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoRXZlbnRUeXBlLkVSUk9SLCB7XHJcbiAgICAgICAgICAgICAgdHlwZTogJ3NmU29ja2V0OmVycm9yJyxcclxuICAgICAgICAgICAgICBkYXRhOiBzZlNvY2tldEV2ZW50LmRhdGEsXHJcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5NRVNTQUdFLCBzZlNvY2tldEV2ZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yOiAoZXJyb3I6IHN0cmluZykgPT4geyAvLyBUT0RPXHJcbiAgICAgICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5FUlJPUiwge1xyXG4gICAgICAgICAgdHlwZTogJ3NmU29ja2V0OmVycm9yJyxcclxuICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgY2xvc2VkOiAoY2xvc2VFdmVudDogSVNGU29ja2V0RXZlbnQpID0+IHsgLy8gVE9ET1xyXG4gICAgICAgIHVuYmluZExpc3RlbmVycyhsaXN0ZW5lcnMpO1xyXG5cclxuICAgICAgICBpZiAoY2xvc2VFdmVudCAmJiBjbG9zZUV2ZW50LmNvbnRleHQgJiYgY2xvc2VFdmVudC5jb250ZXh0LmNvZGUpIHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VFdmVudChjbG9zZUV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVtaXQoRXZlbnRUeXBlLkNMT1NFRCk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghdGhpcy50cmFuc3BvcnQpIHJldHVybjtcclxuICAgIHRoaXMudHJhbnNwb3J0LmJpbmQoRXZlbnRUeXBlLk1FU1NBR0UsIGxpc3RlbmVycy5tZXNzYWdlKTtcclxuICAgIHRoaXMudHJhbnNwb3J0LmJpbmQoRXZlbnRUeXBlLkVSUk9SLCBsaXN0ZW5lcnMuZXJyb3IpO1xyXG4gICAgdGhpcy50cmFuc3BvcnQuYmluZChFdmVudFR5cGUuQ0xPU0VELCBsaXN0ZW5lcnMuY2xvc2VkKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlQ2xvc2VFdmVudChjbG9zZUV2ZW50IDogSVNGU29ja2V0RXZlbnQpIHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IHByZXBhcmVDbG9zZUFjdGlvbihjbG9zZUV2ZW50KTtcclxuXHJcbiAgICBpZiAoYWN0aW9uLnR5cGUgPT09ICdzZlNvY2tldDpjbG9zZWQnKSB7XHJcbiAgICAgIHRoaXMuZW1pdChFdmVudFR5cGUuQ0xPU0VELCBhY3Rpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5FUlJPUiwgYWN0aW9uKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/connection/Connection.ts\n");

/***/ }),

/***/ "./lib/connection/ConnectionManager.ts":
/*!*********************************************!*\
  !*** ./lib/connection/ConnectionManager.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ConnectionManager; });\n/* harmony import */ var _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventsDispatcher */ \"./lib/EventsDispatcher.ts\");\n/* harmony import */ var _Transport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Transport */ \"./lib/Transport.ts\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events */ \"./lib/events.ts\");\n\r\n\r\n\r\nclass ConnectionManager extends _EventsDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options || {};\r\n        this.state = 'initialized';\r\n        this.connection = null;\r\n        this.usingTLS = Boolean(options.useTLS);\r\n        this.errorCallbacks = this.buildErrorCallbacks();\r\n        this.connectionCallbacks = this.buildConnectionCallbacks(this.errorCallbacks);\r\n        this.transport = new _Transport__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('ws', options);\r\n        this.runner = null;\r\n        this.unavailableTimer = 0;\r\n        this.retryTimer = 0;\r\n    }\r\n    connect() {\r\n        if (this.connection || this.runner) {\r\n            return;\r\n        }\r\n        this.updateState('connecting');\r\n        this.startConnecting();\r\n        this.setUnavailableTimer();\r\n    }\r\n    send(data) {\r\n        if (this.connection) {\r\n            return this.connection.send(data);\r\n        }\r\n        return false;\r\n    }\r\n    sendEvent(name, data, channel) {\r\n        if (this.connection) {\r\n            return this.connection.sendEvent(name, data, channel);\r\n        }\r\n        return false;\r\n    }\r\n    disconnect() {\r\n        this.disconnectInternally();\r\n        this.updateState('disconnected');\r\n    }\r\n    startConnecting() {\r\n        const callback = (error, connection) => {\r\n            if (error) {\r\n                this.runner = this.transport.connect(callback);\r\n            }\r\n            else {\r\n                this.abortConnecting();\r\n                this.clearUnavailableTimer();\r\n                this.setConnection(connection);\r\n                this.updateState('connected');\r\n            }\r\n        };\r\n        this.runner = this.transport.connect(callback);\r\n    }\r\n    abortConnecting() {\r\n        if (this.runner) {\r\n            this.runner.abort();\r\n            this.runner = null;\r\n        }\r\n    }\r\n    disconnectInternally() {\r\n        this.abortConnecting();\r\n        this.clearRetryTimer();\r\n        this.clearUnavailableTimer();\r\n        if (this.connection) {\r\n            const connection = this.abandonConnection();\r\n            if (connection)\r\n                connection.close();\r\n        }\r\n    }\r\n    retryIn(delay) {\r\n        if (delay > 0) {\r\n            this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CONNECTING, {\r\n                type: 'sfSocket:connecting',\r\n                data: String(Math.round(delay / 1000)),\r\n                error: null,\r\n            });\r\n        }\r\n        this.retryTimer = setTimeout(() => {\r\n            this.disconnectInternally();\r\n            this.connect();\r\n        }, delay || 0);\r\n    }\r\n    clearRetryTimer() {\r\n        if (this.retryTimer) {\r\n            if (this.retryTimer) {\r\n                clearTimeout(this.retryTimer);\r\n            }\r\n            this.retryTimer = 0;\r\n        }\r\n    }\r\n    setUnavailableTimer() {\r\n        this.unavailableTimer = setTimeout(() => {\r\n            this.updateState('unavailable');\r\n        }, this.options.unavailableTimeout);\r\n    }\r\n    clearUnavailableTimer() {\r\n        if (this.unavailableTimer) {\r\n            clearTimeout(this.unavailableTimer);\r\n        }\r\n        this.unavailableTimer = 0;\r\n    }\r\n    buildConnectionCallbacks(errorCallbacks) {\r\n        return {\r\n            ...errorCallbacks,\r\n            message: (socketEvent) => {\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, socketEvent);\r\n            },\r\n            error: (errorEvent) => {\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, errorEvent);\r\n            },\r\n            closed: (closeEvent) => {\r\n                this.abandonConnection();\r\n                if (this.shouldRetry()) {\r\n                    this.retryIn(1000);\r\n                }\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, closeEvent);\r\n            },\r\n        };\r\n    }\r\n    buildErrorCallbacks() {\r\n        const withErrorEmitted = (callback) => (result) => {\r\n            if (result.error) {\r\n                this.emit(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, {\r\n                    type: 'sfSocket:error',\r\n                    data: null,\r\n                    error: result.error,\r\n                });\r\n            }\r\n            callback(result);\r\n        };\r\n        return {\r\n            refused: withErrorEmitted(() => {\r\n                this.disconnect();\r\n            }),\r\n            unavailable: withErrorEmitted(() => {\r\n                this.retryIn(1000);\r\n            }),\r\n        };\r\n    }\r\n    setConnection(connection) {\r\n        this.connection = connection;\r\n        if (!this.connection) {\r\n            return;\r\n        }\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, this.connectionCallbacks.message);\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, this.connectionCallbacks.error);\r\n        this.connection.bind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, this.connectionCallbacks.closed);\r\n    }\r\n    abandonConnection() {\r\n        if (!this.connection) {\r\n            return null;\r\n        }\r\n        this.connection.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].MESSAGE, this.connectionCallbacks.message);\r\n        this.connection.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].ERROR, this.connectionCallbacks.error);\r\n        this.connection.unbind(_events__WEBPACK_IMPORTED_MODULE_2__[\"EventType\"].CLOSED, this.connectionCallbacks.closed);\r\n        const { connection } = this;\r\n        this.connection = null;\r\n        return connection;\r\n    }\r\n    updateState(newState) {\r\n        const previousState = this.state;\r\n        this.state = newState;\r\n        if (previousState !== newState) {\r\n            this.emit(newState);\r\n        }\r\n    }\r\n    shouldRetry() {\r\n        return this.state === 'connecting' || this.state === 'connected';\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvY29ubmVjdGlvbi9Db25uZWN0aW9uTWFuYWdlci50cz9jMGMxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUQ7QUFDVztBQUl4QjtBQUV2QixNQUFNLGlCQUFrQixTQUFRLHlEQUFnQjtJQXFCN0QsWUFBWSxPQUF5QjtRQUNuQyxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxJQUFJLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQztRQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUNqRCxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUU5RSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksa0RBQVMsQ0FDNUIsSUFBSSxFQUNKLE9BQU8sQ0FDUixDQUFDO1FBQ0YsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFFbkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsT0FBTztRQUNMLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2xDLE9BQU87U0FDUjtRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7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YjtRQUNELElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGlEQUFTLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1RSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxpREFBUyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsaURBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFFdkIsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUVPLFdBQVcsQ0FBQyxRQUFpQjtRQUNuQyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ3RCLElBQUksYUFBYSxLQUFLLFFBQVEsRUFBRTtZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQztJQUVPLFdBQVc7UUFDakIsT0FBTyxJQUFJLENBQUMsS0FBSyxLQUFLLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFdBQVcsQ0FBQztJQUNuRSxDQUFDO0NBQ0YiLCJmaWxlIjoiLi9saWIvY29ubmVjdGlvbi9Db25uZWN0aW9uTWFuYWdlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudHNEaXNwYXRjaGVyIGZyb20gJy4uL0V2ZW50c0Rpc3BhdGNoZXInO1xyXG5pbXBvcnQgVHJhbnNwb3J0LCB7IElSdW5uZXIsIElUcmFuc3BvcnQgfSBmcm9tICcuLi9UcmFuc3BvcnQnO1xyXG5pbXBvcnQgQ29ubmVjdGlvbiBmcm9tICcuL0Nvbm5lY3Rpb24nO1xyXG5pbXBvcnQgeyBJU0ZTb2NrZXRDb25maWcsIElTRlNvY2tldEV2ZW50IH0gZnJvbSAnLi4vU0ZTb2NrZXQnO1xyXG5pbXBvcnQgeyBJQWN0aW9uLCBJQ29ubmVjdGlvbkNhbGxiYWNrcywgSUVycm9yQ2FsbGJhY2tzIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gJy4uL2V2ZW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25uZWN0aW9uTWFuYWdlciBleHRlbmRzIEV2ZW50c0Rpc3BhdGNoZXIge1xyXG4gIG9wdGlvbnM6IElTRlNvY2tldENvbmZpZztcclxuXHJcbiAgc3RhdGU6IHN0cmluZztcclxuXHJcbiAgY29ubmVjdGlvbjogQ29ubmVjdGlvbiB8IG51bGw7XHJcblxyXG4gIHVzaW5nVExTOiBib29sZWFuO1xyXG5cclxuICB1bmF2YWlsYWJsZVRpbWVyOiBudW1iZXI7XHJcblxyXG4gIHJldHJ5VGltZXI6IG51bWJlcjtcclxuXHJcbiAgdHJhbnNwb3J0OiBJVHJhbnNwb3J0O1xyXG5cclxuICBydW5uZXI6IElSdW5uZXIgfCBudWxsO1xyXG5cclxuICBlcnJvckNhbGxiYWNrczogSUVycm9yQ2FsbGJhY2tzO1xyXG5cclxuICBjb25uZWN0aW9uQ2FsbGJhY2tzOiBJQ29ubmVjdGlvbkNhbGxiYWNrcztcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucyA6IElTRlNvY2tldENvbmZpZykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICB0aGlzLnN0YXRlID0gJ2luaXRpYWxpemVkJztcclxuICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XHJcbiAgICB0aGlzLnVzaW5nVExTID0gQm9vbGVhbihvcHRpb25zLnVzZVRMUyk7XHJcblxyXG4gICAgdGhpcy5lcnJvckNhbGxiYWNrcyA9IHRoaXMuYnVpbGRFcnJvckNhbGxiYWNrcygpO1xyXG4gICAgdGhpcy5jb25uZWN0aW9uQ2FsbGJhY2tzID0gdGhpcy5idWlsZENvbm5lY3Rpb25DYWxsYmFja3ModGhpcy5lcnJvckNhbGxiYWNrcyk7XHJcblxyXG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXcgVHJhbnNwb3J0KFxyXG4gICAgICAnd3MnLFxyXG4gICAgICBvcHRpb25zLFxyXG4gICAgKTtcclxuICAgIHRoaXMucnVubmVyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnVuYXZhaWxhYmxlVGltZXIgPSAwO1xyXG4gICAgdGhpcy5yZXRyeVRpbWVyID0gMDtcclxuICB9XHJcblxyXG4gIGNvbm5lY3QoKSB7XHJcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uIHx8IHRoaXMucnVubmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlU3RhdGUoJ2Nvbm5lY3RpbmcnKTtcclxuICAgIHRoaXMuc3RhcnRDb25uZWN0aW5nKCk7XHJcbiAgICB0aGlzLnNldFVuYXZhaWxhYmxlVGltZXIoKTtcclxuICB9XHJcblxyXG4gIHNlbmQoZGF0YTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZChkYXRhKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHNlbmRFdmVudChuYW1lIDogc3RyaW5nLCBkYXRhIDogc3RyaW5nW10sIGNoYW5uZWw/OiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmNvbm5lY3Rpb24pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kRXZlbnQobmFtZSwgZGF0YSwgY2hhbm5lbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0KCkge1xyXG4gICAgdGhpcy5kaXNjb25uZWN0SW50ZXJuYWxseSgpO1xyXG4gICAgdGhpcy51cGRhdGVTdGF0ZSgnZGlzY29ubmVjdGVkJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXJ0Q29ubmVjdGluZygpIHtcclxuICAgIGNvbnN0IGNhbGxiYWNrID0gKGVycm9yOiBhbnksIGNvbm5lY3Rpb246IENvbm5lY3Rpb24pID0+IHsgLy8gVE9ET1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJ1bm5lciA9IHRoaXMudHJhbnNwb3J0LmNvbm5lY3QoY2FsbGJhY2spO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYWJvcnRDb25uZWN0aW5nKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJVbmF2YWlsYWJsZVRpbWVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUoJ2Nvbm5lY3RlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5ydW5uZXIgPSB0aGlzLnRyYW5zcG9ydC5jb25uZWN0KGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWJvcnRDb25uZWN0aW5nKCkge1xyXG4gICAgaWYgKHRoaXMucnVubmVyKSB7XHJcbiAgICAgIHRoaXMucnVubmVyLmFib3J0KCk7XHJcbiAgICAgIHRoaXMucnVubmVyID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZGlzY29ubmVjdEludGVybmFsbHkoKSB7XHJcbiAgICB0aGlzLmFib3J0Q29ubmVjdGluZygpO1xyXG4gICAgdGhpcy5jbGVhclJldHJ5VGltZXIoKTtcclxuICAgIHRoaXMuY2xlYXJVbmF2YWlsYWJsZVRpbWVyKCk7XHJcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB0aGlzLmFiYW5kb25Db25uZWN0aW9uKCk7XHJcbiAgICAgIGlmIChjb25uZWN0aW9uKSBjb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJldHJ5SW4oZGVsYXk6IG51bWJlcikge1xyXG4gICAgaWYgKGRlbGF5ID4gMCkge1xyXG4gICAgICB0aGlzLmVtaXQoRXZlbnRUeXBlLkNPTk5FQ1RJTkcsIHtcclxuICAgICAgICB0eXBlOiAnc2ZTb2NrZXQ6Y29ubmVjdGluZycsXHJcbiAgICAgICAgZGF0YTogU3RyaW5nKE1hdGgucm91bmQoZGVsYXkgLyAxMDAwKSksXHJcbiAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZXRyeVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdEludGVybmFsbHkoKTtcclxuICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICB9LCBkZWxheSB8fCAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xlYXJSZXRyeVRpbWVyKCkge1xyXG4gICAgaWYgKHRoaXMucmV0cnlUaW1lcikge1xyXG4gICAgICBpZiAodGhpcy5yZXRyeVRpbWVyKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lcik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZXRyeVRpbWVyID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VW5hdmFpbGFibGVUaW1lcigpIHtcclxuICAgIHRoaXMudW5hdmFpbGFibGVUaW1lciA9IHNldFRpbWVvdXQoXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCd1bmF2YWlsYWJsZScpOyAvLyBUT0RPOiB3aGF0IGlzIHRoaXM/XHJcbiAgICAgIH0sXHJcbiAgICAgIHRoaXMub3B0aW9ucy51bmF2YWlsYWJsZVRpbWVvdXQsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjbGVhclVuYXZhaWxhYmxlVGltZXIoKSB7XHJcbiAgICBpZiAodGhpcy51bmF2YWlsYWJsZVRpbWVyKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVuYXZhaWxhYmxlVGltZXIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51bmF2YWlsYWJsZVRpbWVyID0gMDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYnVpbGRDb25uZWN0aW9uQ2FsbGJhY2tzKGVycm9yQ2FsbGJhY2tzOiBJRXJyb3JDYWxsYmFja3MpIDogSUNvbm5lY3Rpb25DYWxsYmFja3Mge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4uZXJyb3JDYWxsYmFja3MsXHJcbiAgICAgIG1lc3NhZ2U6IChzb2NrZXRFdmVudDogSVNGU29ja2V0RXZlbnQpID0+IHtcclxuICAgICAgLy8gaW5jbHVkZXMgcG9uZyBtZXNzYWdlcyBmcm9tIHNlcnZlclxyXG4gICAgICAgIHRoaXMuZW1pdChFdmVudFR5cGUuTUVTU0FHRSwgc29ja2V0RXZlbnQpO1xyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcjogKGVycm9yRXZlbnQ6IElTRlNvY2tldEV2ZW50KSA9PiB7XHJcbiAgICAgIC8vIGp1c3QgZW1pdCBlcnJvciB0byB1c2VyIC0gc29ja2V0IHdpbGwgYWxyZWFkeSBiZSBjbG9zZWQgYnkgYnJvd3NlclxyXG4gICAgICAgIHRoaXMuZW1pdChFdmVudFR5cGUuRVJST1IsIGVycm9yRXZlbnQpO1xyXG4gICAgICB9LFxyXG4gICAgICBjbG9zZWQ6IChjbG9zZUV2ZW50OiBJU0ZTb2NrZXRFdmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuYWJhbmRvbkNvbm5lY3Rpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXRyeSgpKSB7XHJcbiAgICAgICAgICB0aGlzLnJldHJ5SW4oMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1pdChFdmVudFR5cGUuQ0xPU0VELCBjbG9zZUV2ZW50KTtcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGJ1aWxkRXJyb3JDYWxsYmFja3MoKSA6IElFcnJvckNhbGxiYWNrcyB7XHJcbiAgICBjb25zdCB3aXRoRXJyb3JFbWl0dGVkID0gKGNhbGxiYWNrOiBGdW5jdGlvbikgPT4gKHJlc3VsdDogSUFjdGlvbikgPT4ge1xyXG4gICAgICBpZiAocmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5lbWl0KEV2ZW50VHlwZS5FUlJPUiwge1xyXG4gICAgICAgICAgdHlwZTogJ3NmU29ja2V0OmVycm9yJyxcclxuICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNhbGxiYWNrKHJlc3VsdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlZnVzZWQ6IHdpdGhFcnJvckVtaXR0ZWQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB9KSxcclxuICAgICAgdW5hdmFpbGFibGU6IHdpdGhFcnJvckVtaXR0ZWQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmV0cnlJbigxMDAwKTtcclxuICAgICAgfSksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRDb25uZWN0aW9uKGNvbm5lY3Rpb246IENvbm5lY3Rpb24gfCBudWxsKSB7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25uZWN0aW9uLmJpbmQoRXZlbnRUeXBlLk1FU1NBR0UsIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5tZXNzYWdlKTtcclxuICAgIHRoaXMuY29ubmVjdGlvbi5iaW5kKEV2ZW50VHlwZS5FUlJPUiwgdGhpcy5jb25uZWN0aW9uQ2FsbGJhY2tzLmVycm9yKTtcclxuICAgIHRoaXMuY29ubmVjdGlvbi5iaW5kKEV2ZW50VHlwZS5DTE9TRUQsIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5jbG9zZWQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhYmFuZG9uQ29ubmVjdGlvbigpIHtcclxuICAgIGlmICghdGhpcy5jb25uZWN0aW9uKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb25uZWN0aW9uLnVuYmluZChFdmVudFR5cGUuTUVTU0FHRSwgdGhpcy5jb25uZWN0aW9uQ2FsbGJhY2tzLm1lc3NhZ2UpO1xyXG4gICAgdGhpcy5jb25uZWN0aW9uLnVuYmluZChFdmVudFR5cGUuRVJST1IsIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5lcnJvcik7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb24udW5iaW5kKEV2ZW50VHlwZS5DTE9TRUQsIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5jbG9zZWQpO1xyXG5cclxuICAgIGNvbnN0IHsgY29ubmVjdGlvbiB9ID0gdGhpcztcclxuICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XHJcblxyXG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKG5ld1N0YXRlIDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5zdGF0ZTtcclxuICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuICAgIGlmIChwcmV2aW91c1N0YXRlICE9PSBuZXdTdGF0ZSkge1xyXG4gICAgICB0aGlzLmVtaXQobmV3U3RhdGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaG91bGRSZXRyeSgpIDogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gJ2Nvbm5lY3RpbmcnIHx8IHRoaXMuc3RhdGUgPT09ICdjb25uZWN0ZWQnO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/connection/ConnectionManager.ts\n");

/***/ }),

/***/ "./lib/constants.ts":
/*!**************************!*\
  !*** ./lib/constants.ts ***!
  \**************************/
/*! exports provided: defaultConfig, STORAGE_KEY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultConfig\", function() { return defaultConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"STORAGE_KEY\", function() { return STORAGE_KEY; });\nconst defaultConfig = {\r\n    host: '',\r\n    port: 80,\r\n    portTLS: 443,\r\n    path: '',\r\n    unavailableTimeout: 10000,\r\n    useTLS: false,\r\n    useStorage: false,\r\n};\r\nconst STORAGE_KEY = 'sfsocket_storage';\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvY29uc3RhbnRzLnRzPzYzMjUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBO0FBQU8sTUFBTSxhQUFhLEdBQW9CO0lBQzVDLElBQUksRUFBRSxFQUFFO0lBQ1IsSUFBSSxFQUFFLEVBQUU7SUFDUixPQUFPLEVBQUUsR0FBRztJQUNaLElBQUksRUFBRSxFQUFFO0lBQ1Isa0JBQWtCLEVBQUUsS0FBSztJQUN6QixNQUFNLEVBQUUsS0FBSztJQUNiLFVBQVUsRUFBRSxLQUFLO0NBQ2xCLENBQUM7QUFFSyxNQUFNLFdBQVcsR0FBRyxrQkFBa0IsQ0FBQyIsImZpbGUiOiIuL2xpYi9jb25zdGFudHMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJU0ZTb2NrZXRDb25maWcgfSBmcm9tICcuL1NGU29ja2V0JztcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29uZmlnOiBJU0ZTb2NrZXRDb25maWcgPSB7XHJcbiAgaG9zdDogJycsXHJcbiAgcG9ydDogODAsXHJcbiAgcG9ydFRMUzogNDQzLFxyXG4gIHBhdGg6ICcnLFxyXG4gIHVuYXZhaWxhYmxlVGltZW91dDogMTAwMDAsXHJcbiAgdXNlVExTOiBmYWxzZSxcclxuICB1c2VTdG9yYWdlOiBmYWxzZSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBTVE9SQUdFX0tFWSA9ICdzZnNvY2tldF9zdG9yYWdlJztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/constants.ts\n");

/***/ }),

/***/ "./lib/events.ts":
/*!***********************!*\
  !*** ./lib/events.ts ***!
  \***********************/
/*! exports provided: EventType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventType\", function() { return EventType; });\nvar EventType;\r\n(function (EventType) {\r\n    EventType[\"CONNECTED\"] = \"connected\";\r\n    EventType[\"MESSAGE\"] = \"message\";\r\n    EventType[\"CONNECTING\"] = \"connecting\";\r\n    EventType[\"DISCONNECTED\"] = \"disconnected\";\r\n    EventType[\"ERROR\"] = \"error\";\r\n    EventType[\"OPEN\"] = \"open\";\r\n    EventType[\"INITIALIZED\"] = \"initialized\";\r\n    EventType[\"CLOSED\"] = \"closed\";\r\n})(EventType || (EventType = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvZXZlbnRzLnRzP2UxY2MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLElBQVksU0FTWDtBQVRELFdBQVksU0FBUztJQUNuQixvQ0FBc0I7SUFDdEIsZ0NBQWlCO0lBQ2pCLHNDQUF1QjtJQUN2QiwwQ0FBMkI7SUFDM0IsNEJBQWE7SUFDYiwwQkFBVztJQUNYLHdDQUF5QjtJQUN6Qiw4QkFBZTtBQUNqQixDQUFDLEVBVFcsU0FBUyxLQUFULFNBQVMsUUFTcEIiLCJmaWxlIjoiLi9saWIvZXZlbnRzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gRXZlbnRUeXBlIHtcclxuICBDT05ORUNURUQ9ICdjb25uZWN0ZWQnLFxyXG4gIE1FU1NBR0U9J21lc3NhZ2UnLFxyXG4gIENPTk5FQ1RJTkc9J2Nvbm5lY3RpbmcnLFxyXG4gIERJU0NPTk5FQ1RFRD0nZGlzY29ubmVjdGVkJyxcclxuICBFUlJPUj0nZXJyb3InLFxyXG4gIE9QRU49J29wZW4nLFxyXG4gIElOSVRJQUxJWkVEPSdpbml0aWFsaXplZCcsXHJcbiAgQ0xPU0VEPSdjbG9zZWQnLFxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/events.ts\n");

/***/ }),

/***/ "./lib/index.ts":
/*!**********************!*\
  !*** ./lib/index.ts ***!
  \**********************/
/*! exports provided: SFSocket, makeSocketOptions, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSocketOptions\", function() { return makeSocketOptions; });\n/* harmony import */ var _SFSocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SFSocket */ \"./lib/SFSocket.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SFSocket\", function() { return _SFSocket__WEBPACK_IMPORTED_MODULE_0__[\"SFSocket\"]; });\n\n\r\nconst makeSocketOptions = (wsUrl) => {\r\n    const url = new URL(wsUrl);\r\n    const urlProtocol = url.protocol ? url.protocol.replace(':', '') : null;\r\n    if (url.hostname && url.port && urlProtocol) {\r\n        return {\r\n            host: url.hostname,\r\n            port: url.port,\r\n            path: urlProtocol,\r\n        };\r\n    }\r\n    return null;\r\n};\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (_SFSocket__WEBPACK_IMPORTED_MODULE_0__[\"SFSocket\"]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvaW5kZXgudHM/NGQ4NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXNDO0FBRXRDLE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxLQUFhLEVBQUUsRUFBRTtJQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQixNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUV4RSxJQUFJLEdBQUcsQ0FBQyxRQUFRLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxXQUFXLEVBQUU7UUFDM0MsT0FBTztZQUNMLElBQUksRUFBRSxHQUFHLENBQUMsUUFBUTtZQUNsQixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7WUFDZCxJQUFJLEVBQUUsV0FBVztTQUNsQixDQUFDO0tBQ0g7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQUdxQztBQUN4QixpSEFBUSxFQUFDIiwiZmlsZSI6Ii4vbGliL2luZGV4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU0ZTb2NrZXQgfSBmcm9tICcuL1NGU29ja2V0JztcclxuXHJcbmNvbnN0IG1ha2VTb2NrZXRPcHRpb25zID0gKHdzVXJsOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHdzVXJsKTtcclxuICBjb25zdCB1cmxQcm90b2NvbCA9IHVybC5wcm90b2NvbCA/IHVybC5wcm90b2NvbC5yZXBsYWNlKCc6JywgJycpIDogbnVsbDtcclxuXHJcbiAgaWYgKHVybC5ob3N0bmFtZSAmJiB1cmwucG9ydCAmJiB1cmxQcm90b2NvbCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaG9zdDogdXJsLmhvc3RuYW1lLCAvLyBob3N0OiAnbG9jYWxob3N0JyxcclxuICAgICAgcG9ydDogdXJsLnBvcnQsIC8vIHBvcnQ6ICc4MDgwJyxcclxuICAgICAgcGF0aDogdXJsUHJvdG9jb2wsIC8vIHBhdGg6ICd3cycsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IHsgU0ZTb2NrZXQsIG1ha2VTb2NrZXRPcHRpb25zIH07XHJcbmV4cG9ydCBkZWZhdWx0IFNGU29ja2V0O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/index.ts\n");

/***/ }),

/***/ "./lib/messageCodingUtils.ts":
/*!***********************************!*\
  !*** ./lib/messageCodingUtils.ts ***!
  \***********************************/
/*! exports provided: decodeMessage, encodeMessage, prepareCloseAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decodeMessage\", function() { return decodeMessage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encodeMessage\", function() { return encodeMessage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"prepareCloseAction\", function() { return prepareCloseAction; });\nconst systemSymbols = ['@'];\r\nconst decodeMessage = (messageEvent) => {\r\n    if (messageEvent) {\r\n        const messageData = JSON.parse(messageEvent);\r\n        const calcChannelName = (topic) => {\r\n            let resultTopic = topic;\r\n            systemSymbols.forEach((symbol) => {\r\n                if (topic && topic[0] === symbol) {\r\n                    resultTopic = '';\r\n                }\r\n            });\r\n            return String(resultTopic);\r\n        };\r\n        return {\r\n            type: 'sfSocket:message',\r\n            error: null,\r\n            data: messageData.payload || null,\r\n            context: {\r\n                ...(messageData.topic ? { channel: calcChannelName(messageData.topic) } : {}),\r\n            },\r\n        };\r\n    }\r\n    return {\r\n        type: 'MessageParseError',\r\n        error: `MessageEvent: ${messageEvent} not contains data property`,\r\n        data: null,\r\n    };\r\n};\r\nconst encodeMessage = (event) => {\r\n    const sfEvent = {\r\n        cmd: event.type,\r\n        args: event.data,\r\n    };\r\n    return JSON.stringify(sfEvent);\r\n};\r\nconst prepareCloseAction = (closeEvent) => {\r\n    if (!closeEvent.context || !closeEvent.context.code) {\r\n        console.error('Socket event do not contain close code');\r\n        return {\r\n            ...closeEvent,\r\n            error: 'Connection refused',\r\n        };\r\n    }\r\n    if (closeEvent.context.code < 4000) {\r\n        if (closeEvent.context.code >= 1002 && closeEvent.context.code <= 1004) {\r\n            return {\r\n                ...closeEvent,\r\n                error: 'Socket is unavailable',\r\n            };\r\n        }\r\n    }\r\n    return closeEvent;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvbWVzc2FnZUNvZGluZ1V0aWxzLnRzP2NkNWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUFNLGFBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRXJCLE1BQU0sYUFBYSxHQUFHLENBQUMsWUFBb0IsRUFBa0IsRUFBRTtJQUNwRSxJQUFJLFlBQVksRUFBRTtRQUNoQixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTdDLE1BQU0sZUFBZSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUU7WUFDeEMsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBRXhCLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtnQkFDL0IsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU0sRUFBRTtvQkFDaEMsV0FBVyxHQUFHLEVBQUUsQ0FBQztpQkFDbEI7WUFDSCxDQUFDLENBQUMsQ0FBQztZQUVILE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQztRQUVGLE9BQU87WUFDTCxJQUFJLEVBQUUsa0JBQWtCO1lBQ3hCLEtBQUssRUFBRSxJQUFJO1lBQ1gsSUFBSSxFQUFFLFdBQVcsQ0FBQyxPQUFPLElBQUksSUFBSTtZQUNqQyxPQUFPLEVBQUU7Z0JBQ1AsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLGVBQWUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2FBQzlFO1NBQ0YsQ0FBQztLQUNIO0lBRUQsT0FBTztRQUNMLElBQUksRUFBRSxtQkFBbUI7UUFDekIsS0FBSyxFQUFFLGlCQUFpQixZQUFZLDZCQUE2QjtRQUNqRSxJQUFJLEVBQUUsSUFBSTtLQUNYLENBQUM7QUFDSixDQUFDLENBQUM7QUFFSyxNQUFNLGFBQWEsR0FBRyxDQUFDLEtBQXFCLEVBQVUsRUFBRTtJQUM3RCxNQUFNLE9BQU8sR0FBRztRQUNkLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSTtRQUNmLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtLQUNqQixDQUFDO0lBRUYsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pDLENBQUMsQ0FBQztBQU1LLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxVQUEwQixFQUFrQixFQUFFO0lBQy9FLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUU7UUFDbkQsT0FBTyxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO1FBRXhELE9BQU87WUFDTCxHQUFHLFVBQVU7WUFDYixLQUFLLEVBQUUsb0JBQW9CO1NBQzVCLENBQUM7S0FDSDtJQUVELElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxFQUFFO1FBTWxDLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRTtZQUN0RSxPQUFPO2dCQUNMLEdBQUcsVUFBVTtnQkFDYixLQUFLLEVBQUUsdUJBQXVCO2FBQy9CLENBQUM7U0FDSDtLQUNGO0lBRUQsT0FBTyxVQUFVLENBQUM7QUFDcEIsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vbGliL21lc3NhZ2VDb2RpbmdVdGlscy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElTRlNvY2tldEV2ZW50IH0gZnJvbSAnLi9TRlNvY2tldCc7XHJcblxyXG5jb25zdCBzeXN0ZW1TeW1ib2xzID0gWydAJ107XHJcblxyXG5leHBvcnQgY29uc3QgZGVjb2RlTWVzc2FnZSA9IChtZXNzYWdlRXZlbnQ6IHN0cmluZyk6IElTRlNvY2tldEV2ZW50ID0+IHtcclxuICBpZiAobWVzc2FnZUV2ZW50KSB7XHJcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZUV2ZW50KTtcclxuXHJcbiAgICBjb25zdCBjYWxjQ2hhbm5lbE5hbWUgPSAodG9waWM6IHN0cmluZykgPT4ge1xyXG4gICAgICBsZXQgcmVzdWx0VG9waWMgPSB0b3BpYztcclxuXHJcbiAgICAgIHN5c3RlbVN5bWJvbHMuZm9yRWFjaCgoc3ltYm9sKSA9PiB7XHJcbiAgICAgICAgaWYgKHRvcGljICYmIHRvcGljWzBdID09PSBzeW1ib2wpIHtcclxuICAgICAgICAgIHJlc3VsdFRvcGljID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBTdHJpbmcocmVzdWx0VG9waWMpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiAnc2ZTb2NrZXQ6bWVzc2FnZScsXHJcbiAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICBkYXRhOiBtZXNzYWdlRGF0YS5wYXlsb2FkIHx8IG51bGwsXHJcbiAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICAuLi4obWVzc2FnZURhdGEudG9waWMgPyB7IGNoYW5uZWw6IGNhbGNDaGFubmVsTmFtZShtZXNzYWdlRGF0YS50b3BpYykgfSA6IHt9KSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdHlwZTogJ01lc3NhZ2VQYXJzZUVycm9yJyxcclxuICAgIGVycm9yOiBgTWVzc2FnZUV2ZW50OiAke21lc3NhZ2VFdmVudH0gbm90IGNvbnRhaW5zIGRhdGEgcHJvcGVydHlgLFxyXG4gICAgZGF0YTogbnVsbCxcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVuY29kZU1lc3NhZ2UgPSAoZXZlbnQ6IElTRlNvY2tldEV2ZW50KTogc3RyaW5nID0+IHtcclxuICBjb25zdCBzZkV2ZW50ID0ge1xyXG4gICAgY21kOiBldmVudC50eXBlLFxyXG4gICAgYXJnczogZXZlbnQuZGF0YSxcclxuICB9O1xyXG5cclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc2ZFdmVudCk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2VlOlxyXG4gKiAxLiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYlNvY2tldHMvV2ViU29ja2V0c19yZWZlcmVuY2UvQ2xvc2VFdmVudFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHByZXBhcmVDbG9zZUFjdGlvbiA9IChjbG9zZUV2ZW50OiBJU0ZTb2NrZXRFdmVudCk6IElTRlNvY2tldEV2ZW50ID0+IHtcclxuICBpZiAoIWNsb3NlRXZlbnQuY29udGV4dCB8fCAhY2xvc2VFdmVudC5jb250ZXh0LmNvZGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NvY2tldCBldmVudCBkbyBub3QgY29udGFpbiBjbG9zZSBjb2RlJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmNsb3NlRXZlbnQsXHJcbiAgICAgIGVycm9yOiAnQ29ubmVjdGlvbiByZWZ1c2VkJyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAoY2xvc2VFdmVudC5jb250ZXh0LmNvZGUgPCA0MDAwKSB7XHJcbiAgICAvLyBpZ25vcmUgMTAwMCBDTE9TRV9OT1JNQUwsIDEwMDEgQ0xPU0VfR09JTkdfQVdBWSxcclxuICAgIC8vICAgICAgICAxMDA1IENMT1NFX05PX1NUQVRVUywgMTAwNiBDTE9TRV9BQk5PUk1BTFxyXG4gICAgLy8gaWdub3JlIDEwMDcuLi4zOTk5XHJcbiAgICAvLyBoYW5kbGUgMTAwMiBDTE9TRV9QUk9UT0NPTF9FUlJPUiwgMTAwMyBDTE9TRV9VTlNVUFBPUlRFRCxcclxuICAgIC8vICAgICAgICAxMDA0IENMT1NFX1RPT19MQVJHRVxyXG4gICAgaWYgKGNsb3NlRXZlbnQuY29udGV4dC5jb2RlID49IDEwMDIgJiYgY2xvc2VFdmVudC5jb250ZXh0LmNvZGUgPD0gMTAwNCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLmNsb3NlRXZlbnQsXHJcbiAgICAgICAgZXJyb3I6ICdTb2NrZXQgaXMgdW5hdmFpbGFibGUnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNsb3NlRXZlbnQ7XHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/messageCodingUtils.ts\n");

/***/ })

/******/ });